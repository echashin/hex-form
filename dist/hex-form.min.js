var hex=function(e){"use strict";function t(t){function r(){var e=$.extend({},o.root.getData());for(var t in e)/^\$(.*)/.test(t)&&delete e[t];return e}function n(){s.find(".has-error").removeClass("has-error"),s.find(".alerts div").remove()}function a(e){o.trigger("beforeReset",{values:r()})?window.setTimeout(function(){n(),o.root.reset()},1):e.preventDefault(),o.trigger("afterReset",{})}function i(e,t){var r="";void 0!==t&&(r=t);for(var n in e){var a=e[n];if(0!==(n+="").indexOf("$")){var o=n;""!==r&&(o=r+"["+n+"]"),$.isArray(a)||$.isPlainObject(a)?i(a,o):u.append(o,a)}}}var o=this;o.errorText=$('meta[name="hex:errortext"]').attr("content"),o.invalidText=$('meta[name="hex:invalidtext"]').attr("content");var s=$("#"+t);s.get(0).getForm=function(){return o};var l={},d="formdata";o.root=void 0;var u=new FormData;o.on=function(e,t){void 0===l[e]&&(l[e]=[]),l[e].indexOf(t)<0&&l[e].push(t)},o.off=function(e,t){void 0!==l[e]&&l[e].splice(l[e].indexOf(t),1)},o.trigger=function(e,t){if(void 0!==l[e]){var r=new function(e){this.type=e,this.stoped=!1,this.stop=function(){this.stoped=!0}}(e);for(var n in l[e]){(0,l[e][n])(t,r)}return!r.stoped}return!0},o.getHandlers=function(){return l},o.draw=function(){o.root.render.draw()};var c=function(e){e.preventDefault(),e.stopPropagation();var t=r();if(!o.trigger("beforeValidation",{values:t}))return!1;if(!0===o.root.validate(!0)){n();if(o.trigger("beforeSubmit",{values:t})){o.loaderShow();var a=s.attr("action"),l=s.find("button[type=submit]:focus");l.size()>0&&void 0!==l.attr("data-action")&&(a=l.attr("data-action"));var c="POST";void 0!==s.attr("method")&&(c=s.attr("method")),"formdata"===d?i(t):u=t,$.ajax({url:a,data:u,type:c,dataType:"json",processData:!1,contentType:!1,success:function(e){o.trigger("afterSubmit",e)&&window.setTimeout(function(){if(!0===e.success?(n(),void 0!==e.reload?!0===e.reload?window.location.href=window.location.href:window.location.href=e.reload:o.loaderHide()):o.loaderHide(),void 0!==e.alerts){for(var t in e.alerts){var r=e.alerts[t];s.find(".alerts").append($("<div>").addClass("alert alert-"+r.type).html(r.text))}o.loaderHide()}if(void 0!==e.run){new Function("form",e.run).call(null,o),o.loaderHide()}},1)},error:function(){o.loaderHide(),s.find(".alerts").append($("<div>").addClass("alert alert-danger").html(o.errorText))}})}}return!1};o.loaderShow=function(){s.find(".loader").show()},o.loaderHide=function(){s.find(".loader").hide()},o.submit=function(){c()},o.getValues=function(){return r()};return function(){s.addClass("loader-container").append('<div class="loader"></div>'),s.attr("data-hex-block",""),s.on("submit",c),s.on("reset",a),0===s.find(".loader").size()&&s.append('<div class="loader"></div>'),void 0!==s.data("datatype")&&(d=s.data("datatype")),o.root=new e.Block(s);var t=o.root.getAllControls(!1),r="<b>"+o.invalidText+"</b> <br>";for(var n in t){var i=t[n],l=i.getErrorsMessages();for(var u in l)r+='<div class="hide" data-hex-error-element="'+i.getName()+'" data-hex-error-name="'+u+'">'+l[u]+"</div>"}s.find(".alerts").after('<div class="alert alert-danger hide" data-hex-form-errors>'+r+"</div>")}(),o}var r={};return e.form=function(e){if(void 0!==e)return void 0===r[e]&&(r[e]=new t(e)),r[e];return $("form.hex-form").each(function(){var e=$(this).attr("id");if(void 0===e)throw new Error("Form dont have id attr");void 0===r[e]&&(r[e]=new t(e))}),r},e.remove=function(e){void 0!==r[e]&&(r[e]=void 0)},$(document).ready(function(){e.form()}),e}(hex=function(e){"use strict";return e.Control=function(t){function r(){switch(m){case"text":default:if(void 0!==N.date){var e=C[0].data("daterangepicker");if(void 0===e)return C[0].val();if(""===C[0].val())return!1;var t="",r="YYYY-MM-DD";if(!0===e.timePicker&&(r+=" HH:mm"),t+=e.startDate.format(r),!1===e.singleDatePicker){t+=" - "+e.endDate.format(r)}return t}return void 0!==N.fileupload||void 0!==N.filesimple?b:C[0].val();case"radio":var n=!1;for(var a in C)C.hasOwnProperty(a)&&(!0===C[a].is(":checked")?(C[a].closest("label").addClass("checked"),n=C[a].val()):C[a].closest("label").removeClass("checked"));return n;case"checkbox":if(C.length<2)return!0===C[0].is(":checked")?(C[0].closest("label").addClass("checked"),z):(C[0].closest("label").removeClass("checked"),B);for(var i=[],o=0,s=C.length;o<s;o++)!0===C[o].is(":checked")?(i.push(C[o].val()),C[o].closest("label").addClass("checked")):(C[o].closest("label").removeClass("checked"),void 0!==C[o].attr("data-hex-false-value")&&i.push(C[o].attr("data-hex-false-value")));return i}}function n(e,t){if(void 0===D[e])return!0;for(var r in D[e]){(0,D[e][r])(t)}}function a(t){b!==t&&(b=t,function(){switch(m){case"file":break;case"checkbox":if(C.length<2)z===b?(C[0].closest("label").addClass("checked"),C[0].prop("checked",!0)):(C[0].closest("label").removeClass("checked"),C[0].prop("checked",!1));else for(var t=0,r=C.length;t<r;t++)-1!==b.indexOf(C[t].val())?(C[t].closest("label").addClass("checked"),C[t].prop("checked",!0)):(C[t].closest("label").removeClass("checked"),C[t].prop("checked",!1));break;case"radio":for(var n in C)C.hasOwnProperty(n)&&(C[n].attr("value")===b?(C[n].prop("checked",!0),C[n].closest("label").addClass("checked")):(C[n].prop("checked",!1),C[n].closest("label").removeClass("checked")));break;case"text":default:if(void 0!==N.date){if(!e.utils.isEmpty(b)){var a=C[0].data("daterangepicker"),i=b.split(" - ");void 0!==i[0]&&a.setStartDate(moment(i[0])),void 0!==i[1]&&a.setEndDate(moment(i[1]))}}else C[0].val(b),C[0].trigger("change")}}())}function i(){return b}function o(){if(void 0!==k&&k.removeClass("has-error"),void 0!==y){y.find("span").removeClass("active");var e=y.closest("form").find("[data-hex-form-errors]:first");e.find('[data-hex-error-element="'+g+'"]').addClass("hide"),e.find("div:not(.hide)").size()>0?e.removeClass("hide"):e.addClass("hide")}}function s(){if(void 0!==y)for(var e=0,t=E.length;e<t;e++){y.find(".error-"+E[e]).addClass("active");var r=y.closest("form").find("[data-hex-form-errors]");r.find('[data-hex-error-element="'+g+'"]').removeClass("hide"),r.find("div:not(.hide)").size()>0?r.removeClass("hide"):r.addClass("hide")}void 0!==k&&k.addClass("has-error")}function l(e){if(void 0===e)return P;if(!1!==e&&!0!==e)throw new Error("Wrong value in readonly method ");for(var t=0,r=C.length;t<r;t++)C[t].prop("readonly",e);P=e}function d(){for(var e=0,t=C.length;e<t;e++)C[e].prop("disabled",!0);S=!0,n("disable"),o()}function u(){for(var e=0,t=C.length;e<t;e++)C[e].prop("disabled",!1);S=!1,n("enable")}function c(e,t){if(!1===e)return V;if(w=b,o(),E=[],!S)for(var r in F)if(F.hasOwnProperty(r)&&(void 0===t||-1!==F[r].getEvents().indexOf(t))&&!F[r].isValid(b)){E.push(F[r].getClassName());break}return E.length>0?(V=!1,s()):(V=!0,o()),n("validate",e),V}function f(t,r){var n={};if(t=e.utils.toCamel(t),void 0!==r&&""!==r&&$.extend(n,jQuery.parseJSON(r)),void 0!==e.validators[t]){var a=new e.validators[t](I,n),i=a.getEvents();for(var o in i)i.hasOwnProperty(o)&&(j[i[o]]=!0);F.push(a)}else console.warn('Validator "'+t+'" not loaded!')}function v(t,r){t=e.utils.toCamel(t);var n={};void 0!==r&&""!==r&&$.extend(n,jQuery.parseJSON(r)),void 0!==e.widgets[t]?N[t]=new e.widgets[t](I,n):console.warn('Widget "'+t+'" not loaded!')}function p(e){c(!0,e.type)}function h(t){C.push(t);var a=e.utils.getAttributes(t);for(var i in a)if(a.hasOwnProperty(i)){var o=i.match(/^data-hex-widget-(.*)$/i);if(null!==o&&void 0!==o[1]&&v(o[1],a[i]),"required"===i)f("required",a[i]);else{var s=i.match(/^data-hex-validator-(.*)$/i);null!==s&&void 0!==s[1]&&f(s[1],a[i])}}t.on("change",function(){n("change",b=r())}),"text"!==m&&"textarea"!==m&&"password"!==m||t.on("keyup",function(e){b=r(),t.trigger("change")}),F.sort(function(e){return function(t,r){return"number"==typeof t[e]?t[e]-r[e]:t[e]<r[e]?-1:t[e]>r[e]?1:0}}("weight"));for(var c in j)j.hasOwnProperty(c)&&t.on(c,p);t.prop("disabled")&&d(),t.prop("readonly")&&l(!0),t.on("disable",function(){d()}),t.on("enable",function(){u()})}var g,m,b,x,w,k,y,C=[],E=[],O={},D={},j={},P=!1,S=!1,V=!0,F=[],N={},z=!0,B=!1,I={getName:function(){return g},setValue:a,getValue:i,reset:function(){w=x,a(x),o()},readonly:l,disable:d,enable:u,validate:c,getInputs:function(){return C},errors:E,getErrorsMessages:function(){return O},showErrors:s,hideErrors:o,inputs:C,on:function(e,t){void 0===D[e]&&(D[e]=[]),D[e].indexOf(t)<0&&D[e].push(t)},off:function(e,t){void 0!==D[e]&&D[e].splice(D[e].indexOf(t),1)},trigger:n,toString:function(){return i()},valueOf:function(){return i()},toJSON:function(){return i()}};return function(e){if("checkbox"===(m=e.type)&&(void 0!==e.trueValue&&(z=e.trueValue),void 0!==e.falseValue&&(B=e.falseValue)),void 0===(g=e.name)&&(console.error("Control dont have name"),console.error(e.inputs)),k=e.formGroup,y=e.errorsBlock,void 0!==e.inputs)for(var t in e.inputs)e.inputs.hasOwnProperty(t)&&h(e.inputs[t]);b=x=r(),w=b,void 0!==y&&y.size()>0?y.find("span").each(function(){var e=$(this),t=e.attr("class").split(/\s+/);$.each(t,function(t,r){if(r.search(/error-/)>=0){var n=e.html();""!==n&&(O[r.replace(/error-/,"")]=n)}})}):y=void 0,o()}(t),I},e}(hex=function(e){"use strict";return e.Block=function(t,r){function n(e){g[e.namespace].push({}),u.draw()}function a(){for(var e=0,t=h.length;e<t;e++)u.removeDirective(h[e]);h=[];for(var r=0,n=m.length;r<n;r++)m[r].removeDirectives()}function i(e){var t=r.getData()[e.namespace],n=t.indexOf(e.data);-1!==n&&(t.splice(n,1),a(),u.clear(),u.draw())}function o(e){var t=r.getData()[e.namespace],n=t.indexOf(e.data);if(n>0){var a=n,i=n-1;t.splice(i,0,t.splice(a,1)[0])}for(var o=n+1,s=t.length;o<s;o++)t[o].$index=o;u.draw()}function s(e){for(var t=e.getName().replace(/['"]/g,"").replace(/[\[\]]/g,".").replace(/\.+/g,".").replace(/\.$/,"").replace(/^\./,"").split("."),r=t.length-1,n=g,a=0;a<=r;a++){var i=t[a];a<r?void 0!==n[i]&&(n=n[i]):void 0!==n[i]&&($.isArray(n)?n.splice(i,1):delete n[i])}var o=x.indexOf(e);-1!==o&&x.splice(o,1)}function l(t){var r=g,n=t.getName(),a=n.replace(/['"]/g,"").replace(/[\[\]]/g,".").replace(/\.+/g,".").replace(/\.$/,"").split(".").filter(function(t){return!e.utils.isEmpty(t)}),i=a.length-1,o=hex.utils.objectProperty(g,n);e.utils.isEmpty(o)||t.setValue(o);for(var s=0;s<=i;s++){var l=a[s];s<i?((e.utils.isEmpty(r[l])||"object"!=typeof r[l])&&(r[l]={}),r=r[l]):Object.defineProperty(r,l,{enumerable:!0,configurable:!0,get:t.getValue,set:t.setValue})}t.on("change",function(){u.draw()}),t.on("disable",function(){}),t.on("enable",function(){}),t.on("validate",function(){c.validate(!1),u.draw()})}function d(e){var r=[];e.node.find('input[type!="submit"],select,textarea').each(function(){var e=$(this),n=e.closest("[data-hex-block]");0===e.closest("[data-hex-list-tpl]").size()&&0===e.closest("[data-hex-if]").size()&&n.get(0)===t.get(0)&&r.push(e)}),function(e,t){var r={};for(var n in e){var a,i=e[n],o=i.attr("name"),s=i.closest(".form-group");s.size()<=0?s=void 0:(a=s.find(".errors")).size()<=0&&(a=void 0);var d=i.prop("tagName").toLowerCase(),u=d,c={type:u,inputs:[i],formGroup:s,errorsBlock:a,block:t,name:o};switch(d){case"select":c.type="select";break;case"textarea":c.type="textarea";break;case"input":switch(u=i.attr("type").toLowerCase()){default:c.type=u;break;case"checkbox":u="checkbox",c.type=u,void 0!==i.attr("value")&&(c.trueValue=i.attr("value")),void 0!==i.attr("data-hex-true-value")&&(c.trueValue=i.attr("data-hex-true-value")),void 0!==i.attr("data-hex-false-value")&&(c.falseValue=i.attr("data-hex-false-value"));break;case"radio":c.type="radio"}}void 0===r[o]?r[o]=c:r[o].inputs.push(i)}for(var f in r)r.hasOwnProperty(f)&&x.push(new hex.Control(r[f]));for(var v=0,p=x.length;v<p;v++)l(x[v])}(r,e),e.node.find("[data-hex-block]").each(function(){var t=$(this);0===t.closest("[data-hex-list-tpl]").size()&&0===t.closest("[data-hex-if]").size()&&t.parents("[data-hex-block]:first").get(0)===e.node.get(0)&&e.addBlock(t)})}var u,c,f,v=!0,p=!1,h=[],g={},m=[],b="",x=[],w=!1,k={},y=[],C=[],E={controls:x,getAllControls:function(e){void 0!==e&&!1!==e||(e=[]),e=e.concat(x);for(var t=0,r=m.length;t<r;t++)e=m[t].getAllControls(e);return e},parent:r,childBlocks:m,$hexBlock:!0,validate:function(e){for(var t=!0,r=0,n=x.length;r<n;r++)x[r].validate(e)||(t=!1);for(r=0,n=m.length;r<n;r++)m[r].validate(e)||(t=!1);return v=t},reset:function(){v=!0;for(var e=0,t=x.length;e<t;e++)x[e].reset();for(e=0,t=m.length;e<t;e++)m[e].reset();u.draw()},getId:function(){return p},getLists:function(e){return void 0===e?k:k[e]},setData:function(t){e.utils.objectExtend(g,t)},getData:function(){return g},disable:function(){for(var e=0,t=x.length;e<t;e++)x[e].disable()},enable:function(){for(var e=0,t=x.length;e<t;e++)x[e].enable()},directives:h,removeDirectives:a,logErrors:function(){for(var e=0,t=x.length;e<t;e++)x[e].validate(!0)||console.warn(x[e].getName());for(e=0,t=m.length;e<t;e++)m[e].logErrors()}};return E.addBlock=function(t){void 0===t.$hexBlock&&(t=new e.Block(t,E));var r=m.indexOf(t);return-1===r?(m.push(t),t):m[r]},E.remove=function(){for(;E.controls.length>0;)s(E.controls[0]);if(a(),!e.utils.isEmpty(r)){if(!e.utils.isEmpty(b)){var n=r.getData()[b];if(void 0!==n)if(n===g)delete r.getData()[b];else if($.isArray(n)){var i=n.indexOf(g);void 0!==i&&-1!==i&&n.splice(i,1)}}var o=r.childBlocks.indexOf(E);-1!==o&&r.childBlocks.splice(o,1)}for(;E.childBlocks.length>0;)E.childBlocks[0].remove();t.remove(),c.validate(!1)},function(){if(E.node=t,t.get(0).getBlock=function(){return E},e.utils.isEmpty(r)?(c=E,r=!1,E.parent=void 0,w=!0,u=E.render=new e.Render,g=u.data,E.namespaceFull=""):(c=r.root,u=E.render=r.render,w=!1),E.root=c,e.utils.isEmpty(t.attr("data-hex-block"))||(b=t.attr("data-hex-block"),f=void 0,t.closest('[data-hex-list="'+b+'"]').size()>0&&(f=t.closest('[data-hex-list="'+b+'"]').children('[data-hex-block="'+b+'"]').index(t))),!w)if(e.utils.isEmpty(b))g=r.getData(),Object.defineProperty(E,"namespaceFull",{enumerable:!0,configurable:!0,get:function(){return r.namespaceFull},set:function(){}});else if(void 0!==f){var a=r.getData();void 0!==a&&(void 0===(a=a[b])[f]?a[f]=g:g=a[f]),Object.defineProperty(g,"$index",{enumerable:!0,configurable:!0,get:function(){return r.getData()[b].indexOf(g)},set:function(){}}),Object.defineProperty(E,"namespaceFull",{enumerable:!0,configurable:!0,get:function(){return r.namespaceFull+"['"+b+"']['"+g.$index+"']"},set:function(){}})}else{var s=r.getData();void 0!==s&&(void 0===s[b]?s[b]=g:g=s[b]),Object.defineProperty(E,"namespaceFull",{enumerable:!0,configurable:!0,get:function(){return r.namespaceFull+"['"+b+"']"},set:function(){}})}e.utils.isEmpty(t.attr("id"))||(p=t.attr("id"),Object.defineProperty(g,"$"+p,{enumerable:!0,configurable:!0,get:function(){return v},set:function(e){v=e}})),w||void 0===r.getData().$index||Object.defineProperty(g,"$parentIndex",{enumerable:!0,configurable:!0,get:function(){return r.getData().$index},set:function(){}}),Object.defineProperty(g,"$valid",{enumerable:!0,configurable:!0,get:function(){return v},set:function(e){v=e}}),function(t){t.node.find("[data-hex-bind-html],[data-hex-bind-title],[data-hex-bind-for],[data-hex-bind-class],[data-hex-bind-data-content],[data-hex-bind-id],[data-hex-bind-href],[data-hex-disable],[data-hex-bind-name],[data-hex-bind-src],[data-hex-show],[data-hex-hide],[data-hex-list],[data-hex-list-add],[data-hex-list-remove],[data-hex-list-up],[data-hex-if],[data-hex-data]").addBack().each(function(){var r=$(this);if(0===r.parents("[data-hex-if]").size()&&0===r.closest("[data-hex-list-tpl]").size()&&(r.closest("[data-hex-block]").first().get(0)===t.node.get(0)||r.get(0)===t.node.get(0))){var a=e.utils.getAttributes(r);for(var s in a)if(a.hasOwnProperty(s))switch(s){case"data-hex-bind-html":case"data-hex-bind-css":case"data-hex-bind-title":case"data-hex-bind-name":case"data-hex-bind-href":case"data-hex-bind-src":case"data-hex-bind-id":case"data-hex-bind-for":case"data-hex-bind-data-content":case"data-hex-bind-class":h.push(new e.directives.Bind({node:r,attribute:s,block:t}));break;case"data-hex-show":h.push(new e.directives.Show({node:r,block:t}));break;case"data-hex-data":h.push(new e.directives.Data({node:r,block:t}));break;case"data-hex-if":h.push(new e.directives.If({node:r,block:t}));break;case"data-hex-disable":h.push(new e.directives.Disable({node:r,block:t}));break;case"data-hex-list":var l=new e.directives.List({node:r,block:t});void 0===k[l.getNamespace()]&&(k[l.getNamespace()]=[]),k[l.getNamespace()].push(l),h.push(l);break;case"data-hex-list-add":var d=new e.directives.ListAdd({node:r});d.on("add",n),y.push(d);break;case"data-hex-list-remove":var c=new e.directives.ListRemove({node:r,block:t});c.on("remove",i),h.push(c);break;case"data-hex-list-up":var f=new e.directives.ListUp({node:r});f.on("up",o),C.push(f)}for(var v=0,p=h.length;v<p;v++)u.addDirective(h[v])}})}(E),d(E),u.clear(),u.draw(h)}(),E},e}(hex=function(e){"use strict";return e.Render=function(){function t(){i=[],a={}}var r=[],n={},a={},i=[];return{directives:r,removeDirective:function(e){r.indexOf(e)>=0&&(r.splice(r.indexOf(e),1),t())},addDirective:function(e){if(-1===r.indexOf(e)){r.push(e);for(var t=0,n=e.variables.length;t<n;t++)-1===i.indexOf(e.variables[t])&&i.push(e.variables[t])}},data:n,draw:function(t){var o=[],s=JSON.parse(JSON.stringify(n));0===i.length&&(i=function(){i=[];for(var t=0,n=r.length;t<n;t++)for(var a=0,o=r[t].variables.length;a<o;a++)-1===i.indexOf(r[t].variables[a])&&i.push(r[t].variables[a]);return i=e.utils.arrayUniq(i)}());for(var l=0,d=i.length;l<d;l++){var u,c=i[l];if(/\[\'\$root\'\]/.test(c)){var f=c.replace(/^(.*)\[\'\$root\'\]/,""),v=c.replace(/\[\'\$root\'\](.*)$/,"");if(/\$parentIndex/.test(f)){var p=v+"['$parentIndex']",h=e.utils.objectProperty(s,p);f=f.replace(/\$parentIndex/,h),e.utils.objectProperty(s,p,h),JSON.stringify(h)!==a[p]&&o.push(p)}u=e.utils.objectProperty(s,f)}else u=e.utils.objectProperty(s,c);void 0===u&&(u=""),e.utils.objectProperty(s,c,u),JSON.stringify(u)!==a[c]&&o.push(c)}if(void 0!==o&&o.length>0){var g=t;if(void 0===t){g=[];for(var m=0,b=r.length;m<b;m++){var x=r[m];for(l=0,d=o.length;l<d;l++)x.variables.indexOf(o[l])>=0&&g.push(x)}}for(l=0;l<g.length;l++)g[l].render(s);for(l=0,d=o.length;l<d;l++)if(/\[\'\$root\'\]/.test(o[l])){var w=o[l].replace(/^(.*)\[\'\$root\'\]/,"");a[o[l]]=JSON.stringify(e.utils.objectProperty(n,w))}else a[o[l]]=JSON.stringify(e.utils.objectProperty(n,o[l]))}},clear:t}},e}(hex=function(e){"use strict";return e.validators.date=function(t,r){var n=this,a=["change","blur"];n.weight=3;var i;n.getClassName=function(){return"date"},n.setEvents=function(e){a=e},n.getEvents=function(){return a},n.isValid=function(t){if(e.utils.isEmpty(t))return!0;var r=i.inputmask("option","mask");return Inputmask.isValid(i.val(),{alias:r})},void 0!==r.events&&n.setEvents(r.events),i=t.getInputs()[0]},e}(hex=function(e){"use strict";return e.validators.phone=function(t,r){var n=this,a=["blur"];n.getClassName=function(){return"phone"},n.weight=4,n.setEvents=function(e){a=e},n.getEvents=function(){return a},n.isValid=function(t){if(e.utils.isEmpty(t))return!0;return 11==t.replace(/\D+/g,"").length},void 0!==r.events&&n.setEvents(r.events),t.getInputs()[0]},e}(hex=function(e){"use strict";return e.validators.mask=function(t,r){var n,a=this,i=["blur"];a.getClassName=function(){return"mask"},a.weight=4,a.setEvents=function(e){i=e},a.getEvents=function(){return i},a.isValid=function(t){if(e.utils.isEmpty(t))return!0;var r=n.inputmask("option","mask");return Inputmask.isValid(n.val(),{alias:r})},void 0!==r.events&&a.setEvents(r.events),n=t.getInputs()[0]},e}(hex=function(e){"use strict";return e.validators.passwordConfirm=e.validators.confirm=function(e,t){var r=this;r.getClassName=function(){return"password-confirm"};var n=["change","blur"];r.weight=4;var a;r.setEvents=function(e){n=e},r.getEvents=function(){return n},r.isValid=function(e){return a.val()===e},void 0!==t.events&&r.setEvents(t.events),void 0!==t.password&&(a=$(t.password))},e}(hex=function(e){"use strict";return e.validators.numSize=function(e,t){var r,n,a=this,i=!0,o="num-size";a.getClassName=function(){return o};var s=["blur"];a.weight=3,a.setEvents=function(e){s=e},a.getEvents=function(){return s},a.isValid=function(t){return t=parseInt(t),isNaN(t)&&(t="",i)?(e.setValue(""),!0):void 0!==r&&t<r?(o="num-size-min",!!i&&(e.setValue(r),!0)):!(void 0!==n&&t>n)||(o="num-size-max",!!i&&(e.setValue(n),!0))},void 0!==t.min&&(r=t.min),void 0!==t.max&&(n=t.max),void 0!==t.round&&(i=t.round),void 0!==t.events&&a.setEvents(t.events)},e}(hex=function(e){"use strict";return e.validators.stringLength=function(t,r){var n,a,i=this,o="string-length";i.getClassName=function(){return o};var s=["change","blur"];i.weight=3,i.setEvents=function(e){s=e},i.getEvents=function(){return s},i.isValid=function(t){var r=t.length;return!!e.utils.isEmpty(t)||(void 0!==n&&r<n?(o="string-length-min",!1):!(void 0!==a&&r>a)||(o="string-length-max",!1))},void 0!==r.min&&(n=r.min),void 0!==r.max&&(a=r.max),void 0!==r.events&&i.setEvents(r.events)},e}(hex=function(e){"use strict";return e.validators.unique=function(t,r){var n=this;n.getClassName=function(){return"unique"};var a,i,o=!1,s=!1,l=["blur","change","unique"];n.weight=5,n.setEvents=function(e){l=e},n.getEvents=function(){return l},n.isValid=function(r){return!1!==s&&s.abort(),!(!e.utils.isEmpty(r)&&r!==a)||r!==o&&(s=$.ajax({url:i,data:{value:r},method:"POST",async:!0,success:function(e){!0===e.success?(a=r,t.validate(!0,"unique")):(o=r,t.validate(!0,"unique"))}}),!0)},void 0!==r.events&&n.setEvents(r.events),void 0!==r.url&&(i=r.url)},e}(hex=function(e){"use strict";return e.validators.email=function(t,r){var n=this;n.getClassName=function(){return"email"};var a=["blur"],i=/^\S+[@]\S+\.\S{2,10}$/im;n.weight=1,n.setEvents=function(e){a=e},n.getEvents=function(){return a},n.isValid=function(t){return!!e.utils.isEmpty(t)||i.test(t)},void 0!==r.events&&n.setEvents(r.events)},e}(hex=function(e){"use strict";return e.validators.required=function(t,r){var n=this,a=["blur","change"];n.weight=0;n.getClassName=function(){return"required"},n.setEvents=function(e){a=e},n.getEvents=function(){return a},n.isValid=function(t){return!e.utils.isEmpty(t)},void 0!==r&&void 0!==r.events&&n.setEvents(r.events)},e}(hex=function(e){"use strict";return e.widgets.search=function(t,r){var n,a=[];!function(){n=t.getInputs()[0];var i=$(r.selector);i.size()>0&&i.each(function(){a.push({text:$(this).text().toLowerCase(),node:$(this)})}),n.on("change keyup mouseup",function(){var t=n.val().toLowerCase();e.utils.isEmpty(t)?function(e){var t=e.length-1;for(t;t>=0;t--)e[t].node.removeClass("hidden")}(a):function(e,t){var r=t.length-1;for(r;r>=0;r--)t[r].text.indexOf(e)>-1?t[r].node.removeClass("hidden"):t[r].node.addClass("hidden")}(t,a)})}()},e}(hex=function(e){"use strict";return e.widgets.fileupload=function(t,r){function n(){var e=[];for(var r in b)b[r].valid&&void 0!==b[r].id&&e.push(parseInt(b[r].id));m&&(e=e[0]),t.setValue(e),d.trigger("change")}function a(){var e=!1;for(var t in b)if(!0===b[t].loading){e=!0;break}x.loading=e}function i(e,t){var r=p.clone();void 0!==t&&r.addClass(t),r.find("i").attr("title",e.name).html(e.name);var n=r.find(".upload-preview");return void 0!==e.url?(n.attr("href",e.url),void 0!==e.thumb&&n.html('<img src="'+e.thumb+'"/>')):n.hide(),r.get(0).outerHTML}function o(e){if(m){for(var t in b)b[t].remove(!0);f.find("thumb").remove(),n()}var r=new w({uid:e.uniqueIdentifier,name:e.name,loading:!0}),o=i(r,"upfile-new loading");f.append(o),r.setElement(f.find("thumb:last-child")),b.push(r),r.progress(5),a()}function s(e){for(var t=b.length,r=0;r<=t;r++)if(b[r].uid===e)return b[r];return!1}function l(e,t){var r=s(e.uniqueIdentifier);!1!==r&&r.error(t),a()}var d,u,c,f,v,p,h,g=0,m=!1,b=[],x=this;x.loading=!1;var w=function(e){function t(e){if(void 0!==e)for(var t in e)r.hasOwnProperty(t)&&(r[t]=e[t]);void 0===r.id&&(r.valid=!1)}var r=this;r.id=void 0,r.uid=void 0,r.thumb=void 0,r.url=void 0,r.name=void 0,r.valid=!0,r.rid=0,r.loading=!1;var i;r.setElement=function(e){(i=e).on("click","remove",function(e){return e.preventDefault(),r.remove(),!1}),function(){var e=h;void 0!==r.id&&(e+="_"+r.id),void 0!==r.uid&&(e+="_"+r.uid),r.rid=e,i.attr("id",e)}()},r.progress=function(e){r.valid=!1,i.find("p").show().css("width",e+"%")},r.complete=function(e){r.valid=!0,r.loading=!1,t(e),i.removeClass("loading");var a=i.find(".upload-preview");a.show(),void 0!==r.thumb&&a.html('<img src="'+r.thumb+'"/>'),i.find("p").hide(),r.loading=!1,n()},r.remove=function(e){r.valid=!1,r.loading=!1;var t=b.indexOf(r);t>=0&&(x.uploaderRemoveFile(r.uid),b.splice(t,1)),!0===e?i.remove():i.fadeOut(function(){i.remove()}),a(),n()},r.error=function(e){r.valid=!1,r.loading=!1,i.find("p").hide(),i.removeClass("loading"),e="! Ошибка:<br/>"+e,i.find(".frame").html('<div class="upload-error">'+e+"</div>"),i.addClass("upfile-error"),i.removeClass("upfile-new");var t=b.indexOf(r);t>=0&&(x.uploaderRemoveFile(r.uid),b.splice(t,1))},t(e)};x.uploaderRemoveFile=function(e){var t=c.files;for(var r in t)if(t[r].uniqueIdentifier===e){c.removeFile(t[r]);break}},function(){if(d=t.getInputs()[0],h="u_"+d.attr("id")+"_",void 0!==r.types){v=[];var x=/$[\.]/;for(var k in r.types){var y=r.types[k];x.test(y)||(y="."+y),v.push(y)}}if(!0===r.single&&(m=!0),void 0!==r.limit&&(g=parseInt(r.limit),isNaN(g)&&(g=1),0===g&&(g=0),delete r.limit),void 0===r.url)throw new Error("doesnt set url paremetr on "+t.name);var C={target:u=r.url,singleFile:m,simultaneousUploads:5,chunkSize:262144,maxChunkRetries:void 0,allowDuplicateUploads:!1,prioritizeFirstAndLastChunk:!0,generateUniqueIdentifier:function(t){var r="file_";return r+=t.size,r+=t.name,r+=h,r=e.utils.md5(r)}};c=new Flow(C),p=d.closest(".form-group").find(".upload-dropzone *").first().clone(!1),d.closest(".form-group").find(".upload-dropzone *").remove(),f=d.closest(".form-group").find(".upload-dropzone"),m&&f.addClass("upload-dropzone-single"),f.on("dragenter",function(){$(this).addClass("drag")}),f.on("dragover",function(){$(this).addClass("drag")}),f.on("dragend",function(){$(this).removeClass("drag")}),f.on("drop",function(){$(this).removeClass("drag")}),f.on("mouseout",function(){$(this).removeClass("drag")}),f.on("dragleave",function(){$(this).removeClass("drag")}),m||dragula([f[0]],{mirrorContainer:f.closest(".form-group")[0],direction:"horizontal",copy:!1,copySortSource:!1}).on("drop",function(){!function(){var e=[];f.find("thumb").each(function(){var t=$(this).attr("id");for(var r in b)b[r].rid===t&&e.push(b[r])}),b=e,n()}()});var E=d.data("hexFiles");if(void 0!==E){for(var O in E){var D=new w(E[O]);b.push(D)}!function(){var e="";for(var t in b)e+=i(b[t]);f.html(e),f.find("thumb").each(function(e){b[e].setElement($(this))})}()}if(n(),c.support){var j={};void 0!==v&&(j.accept=v.join(",")),c.assignBrowse(d.closest(".form-group").find("[data-upload]")[0],!1,m,j),c.assignDrop(f[0]),c.on("fileAdded",function(e){var t=!0;return void 0!==v&&v.indexOf("."+e.getType())<0&&(t=!1),t?o(e):(o(e),l(e,'"'+e.name+'" - wrong file type. Allowed: '+v.join(", "))),t}),c.on("fileSuccess",function(e,t){!function(e,t){var r=s(e.uniqueIdentifier);!1!==r&&r.complete(t),a()}(e,t=$.parseJSON(t))}),c.on("fileError",function(e,t){l(e,t)}),c.on("filesSubmitted",function(){c.upload()}),c.on("fileProgress",function(e){!function(e){var t=Math.floor(e.size/100),r=Math.floor(e.sizeUploaded()/t),n=s(e.uniqueIdentifier);!1!==n&&n.progress(r)}(e)})}}()},e}(hex=function(e){"use strict";return e.widgets.filesimple=function(e){function t(t){e.setValue(t.target.files[0])}e.getInputs()[0].bind("change",t)},e}(hex=function(e){"use strict";return jQuery.fn.rVal=jQuery.fn.val,jQuery.fn.val=function(e){return void 0!==this.attr("data-hex-select-assoc")?this.get(0).assocVal(e):this.rVal.apply(this,arguments)},e.widgets.select2=function(t,r){var n,a="local";!function(){(n=t.getInputs()[0]).get(0).assocVal=function(e){return void 0!==e?function(e){if($.isArray(e)){var t=[],r=!1;for(var a in e)if($.isPlainObject(e[a])){if(t.push(e[a].id),0===n.find('option[value="'+e[a].id+'"]').length){var i=new Option(e[a].text+"",e[a].id+"",!0,!0);n.append(i),r=!0}}else t.push(e[a]);r&&n.trigger({type:"select2:select",params:{data:e}}),n.rVal(t)}else n.rVal(e);return n}(e):function(){var e=n.select2("data"),t=[];for(var r in e)t.push({id:e[r].id,text:e[r].text});return t}()},void 0!==r.templateSelection&&(r.templateSelection=window[r.templateSelection]),void 0!==r.templateResult&&(r.templateResult=window[r.templateResult]);var i={theme:"bootstrap",allowClear:!0,placeholder:r.placeholder||"",minimumResultsForSearch:10};if(void 0!==r.data){var o=r.data.split("::"),s=o[0],l=n.closest("[data-hex-block]").get(0).getBlock().getData();if(void 0!==o[1]){var d=window[o[1]];r.data=d(e.utils.objectProperty(l,s))}else r.data=e.utils.objectProperty(l,s)}if(void 0!==r.url){a="ajax";var u=n.find("option[selected]");if(r.ajax={url:r.url,method:"POST",dataType:"json",delay:250,data:function(e){return{search:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.rows,pagination:{more:t.page*e.limit<e.total}}},cache:!1},delete r.url,void 0!==r.parent){var c=r.parent.selector,f=r.parent.param||"parent_id";e.utils.isEmpty($(c).val())&&(t.disable(),n.val("").trigger("change")),$(c).on("change",function(){e.utils.isEmpty($(this).val())?(t.disable(),n.val("").trigger("change")):(t.enable(),n.val("").trigger("change"))}),delete r.parent;var v=function(){return $(c).val()};r.ajax.data=function(e){var t={search:e.term,page:e.page};return t[f]=v,t}}}$.extend(i,r),n.select2(i),"ajax"===a&&(u.each(function(){n.append($(this))}),n.trigger("change"))}()},e}(hex=function(e){"use strict";return e.widgets.phone=function(e,t){var r,n="+7(999)999-99-99";r=e.getInputs()[0],void 0!==t.mask&&(n=t.mask),r.inputmask(n)},e}(hex=function(e){"use strict";return e.widgets.mask=function(e,t){var r,n;!function(){if(r=e.getInputs()[0],void 0===t.mask)throw new Error(r.attr("name")+" doesn`t set mask param");n=t.mask,r.inputmask(n)}()},e}(hex=function(e){"use strict";var t=$("html").attr("lang");if(e.utils.isEmpty(t))throw new Error("Doesn`t set lang attr in html tag");return moment.locale(t.toLowerCase()),e.widgets.date=function(t,r){var n,a=!1,i=!1,o=!1,s=!1;!function(){n=t.getInputs()[0];var l=moment.localeData(),d=l.longDateFormat("L");void 0!==r.timePicker&&!0===r.timePicker&&(d+=" "+l.longDateFormat("LT"));var u={autoUpdateInput:!1,linkedCalendars:!1,singleDatePicker:!0,locale:{format:d,separator:" - ",applyLabel:"Готово",cancelLabel:"Отмена",fromLabel:"От",toLabel:"До",customRangeLabel:"Custom",daysOfWeek:moment.weekdaysShort(),monthNames:moment.months(),firstDay:l.firstDayOfWeek()}};void 0!==r.parentMin&&(o=$(r.parentMin).val(),e.utils.isEmpty(o)||(u.minDate=o),a=r.parentMin,delete r.parentMin),void 0!==r.parentMax&&(s=$(r.parentMax).val(),e.utils.isEmpty(s)||(u.maxDate=s),i=r.parentMax,delete r.parentMax),$.extend(u,r);var c=u.locale.format.replace(/[H]/g,"9").replace(/[m]/g,"9").replace(/[D]+/g,"d").replace(/[M]+/g,"m").replace(/[Y]+/g,"y");!1===u.singleDatePicker&&(c+=u.locale.separator+c),n.inputmask(c);var f=function(){var e=n.data("daterangepicker"),t=e.startDate.format(u.locale.format);!1===u.singleDatePicker&&(t+=u.locale.separator+e.endDate.format(u.locale.format)),n.val(t).trigger("change")};n.daterangepicker(u),n.on("apply.daterangepicker",function(){f()});var v=function(){s=$(i).val(),e.utils.isEmpty(s)?(t.disable(),n.val("").trigger("change")):(u.maxDate=s,n.daterangepicker(u),n.on("apply.daterangepicker",function(){f()}),t.enable(),e.utils.isEmpty(n.val())&&(e.utils.isEmpty(o)?(n.data("daterangepicker").setStartDate(s),n.data("daterangepicker").setEndDate(s)):(n.data("daterangepicker").setStartDate(o),n.data("daterangepicker").setEndDate(o))),f())},p=function(){o=$(a).val(),e.utils.isEmpty(o)?(t.disable(),n.val("").trigger("change")):(u.minDate=o,n.daterangepicker(u),n.on("apply.daterangepicker",function(){f()}),t.enable(),e.utils.isEmpty(n.val())&&(n.data("daterangepicker").setStartDate(o),n.data("daterangepicker").setEndDate(o)),f(),!1!==i&&v())};!1!==a&&$(a).on("change",function(){p()}),!1!==i&&$(i).on("change",function(){v()}),!1!==i&&v(),!1!==a&&p()}()},e}(hex=function(e){"use strict";return e.widgets.passwordStrength=function(e){var t,r,n=0,a=0,i=0,o=0,s=0,l=new RegExp("[A-ZА-Я]"),d=new RegExp("[a-zа-я]"),u=new RegExp("[0-9]"),c=new RegExp("([!,%,&,@,#,$,^,*,?,_,~])");this.weight=0,t=e.getInputs()[0],r=t.closest(".form-group").find(".password-strength div"),t.bind("keyup change",function(){var e=t.val();r.attr("class","s-"+function(e){return n=e.length>8?1:0,a=e.match(l)?1:0,i=e.match(d)?1:0,o=e.match(u)?1:0,s=e.match(c)?1:0,n+a+i+o+s}(e))})},e}(hex=function(e){"use strict";return e.widgets.passwordShow=function(e){var t,r,n="password";r=e.getInputs()[0],(t=r.closest(".form-group").find("button.password-show")).bind("click",function(e){return e.preventDefault(),"password"===n?(r.attr("type","text"),t.addClass("active"),n="text"):(r.attr("type","password"),t.removeClass("active"),n="password"),r.focus(),!1})},e}(hex=function(e){"use strict";return e.directives.ListRemove=function(t){function r(e,t){if(void 0===i[e])return!0;for(var r in i[e]){(0,i[e][r])(t)}}var n,a,i={},o=[],s=!1,l={render:function(r){if(!s){var i=e.utils.objectProperty(r,t.block.parent.namespaceFull+a),o=0;e.utils.isEmpty(i)||(o=i.length),o<2?n.prop("disabled",!0):n.prop("disabled",!1)}},on:function(e,t){void 0===i[e]&&(i[e]=[]),i[e].indexOf(t)<0&&i[e].push(t)},off:function(e,t){void 0!==i[e]&&i[e].splice(i[e].indexOf(t),1)},trigger:r};return Object.defineProperty(l,"variables",{enumerable:!0,configurable:!0,get:function(){return o.map(function(e){return t.block.parent.namespaceFull+e})},set:function(){}}),function(e){n=$(e.node),a=n.closest("[data-hex-list]").attr("data-hex-list"),void 0!==n.closest("[data-hex-list]").attr("data-hex-list-allowempty")&&(s=!0),o.push("['"+a+"']"),n.on("click",function(e){e.preventDefault();var t=$(this).closest("[data-hex-block]").get(0).getBlock().getData();r("remove",{namespace:a,data:t})})}(t),l},e}(hex=function(e){"use strict";return e.directives.ListAdd=function(e){function t(e,t){if(void 0===a[e])return!0;for(var r in a[e]){(0,a[e][r])(t)}}var r,n,a={},i={},o={on:function(e,t){void 0===a[e]&&(a[e]=[]),a[e].indexOf(t)<0&&a[e].push(t)},off:function(e,t){void 0!==a[e]&&a[e].splice(a[e].indexOf(t),1)},trigger:t};return function(e){r=$(e.node),n=r.attr("data-hex-list-add"),void 0!==r.attr("data-hex-list-add-item")&&(i=JSON.parse(r.attr("data-hex-list-add-item"))),r.on("click",function(e){e.preventDefault(),t("add",{namespace:n,item:i})})}(e),o},e}(hex=function(e){"use strict";return e.directives.List=function(t){function r(e,t){void 0===v[e]&&(v[e]=[]),v[e].indexOf(t)<0&&v[e].push(t)}function n(e,t){if(void 0===v[e])return!0;for(var r in v[e]){(0,v[e][r])(t)}}function a(){var e=o.clone(!1);e.attr("data-hex-block",s),i.children(f).size()>0?e.insertAfter(i.children(f).last()):i.prepend(e);var t=d.addBlock(e);return n("add",e),d.render.draw(),t}var i,o,s,l,d,u=[],c=!1,f="[data-hex-block]",v={},p={type:"list",getNamespace:function(){return s},render:function(){var t=i.children(f),r=-1;t.each(function(e){var t=$(this).get(0).getBlock().getData();-1!==l.indexOf(t)&&void 0!==t||($(this).get(0).getBlock().remove(),r=e)}),t=i.children(f);for(var o in l)if(!e.utils.isEmpty(l[o])){for(var s=!1,d=0,u=t.length;d<u;d++)t[d].getBlock().getData()===l[o]&&(s=!0);s||(a(),t=i.children(f))}r>-1&&n("remove",r)},on:r,off:function(e,t){void 0!==v[e]&&v[e].splice(v[e].indexOf(t),1)},trigger:n,add:a,remove:function(e){if(!c&&1===i.children(f).size())return!1;var t=e+1,r=i.children(f+":nth-child("+t+")").first();r.size()>0&&r.get(0).getBlock().remove(),i.children(f).each(function(e){var t=$(this).get(0).getBlock();if(t.getData().$index=e,t.childBlocks.length>0)for(var r=0,n=t.childBlocks.length;r<n;r++)t.childBlocks[r].getData().$parentIndex=e;$(this).get(0).getBlock().render.draw()}),n("remove",e)}};return Object.defineProperty(p,"variables",{enumerable:!0,configurable:!0,get:function(){return u.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),function(){i=$(t.node),d=t.block,void 0===(s=i.attr("data-hex-list"))&&console.warn("list don`t have namespace");var n=d.getData();void 0===n[s]&&e.utils.objectProperty(n,s,[]),l=n[s],void 0!==i.attr("data-hex-list-allowempty")&&(c=!0),f='[data-hex-block="'+s+'"]',o=i.children("[data-hex-list-tpl]").first().clone(!1).removeAttr("data-hex-list-tpl"),i.children("[data-hex-list-tpl]").first().remove(),o.find('a[data-toggle="tab"]').size()>0&&(r("add",function(e){window.setTimeout(function(){e.find('a[data-toggle="tab"]').click()},1)}),r("remove",function(e){var t=e+1;window.setTimeout(function(){var e=i.find(f+":nth-child("+t+")").first();if(e.size()>0)e.find('a[data-toggle="tab"]').click();else{t--;var r=i.find(f+":nth-child("+t+")").first();r.size()>0&&r.find('a[data-toggle="tab"]').click()}},1)})),u.push("['"+s+"']")}(),p},e}(hex=function(e){"use strict";return e.directives.Disable=function(t){var r,n,a=[],i=!1,o=[],s={render:function(a){var s=e.utils.objectProperty(a,t.block.namespaceFull),l=[],d=!1;if(!e.utils.isEmpty(s)){for(var u in o)l.push(e.utils.objectProperty(s,o[u]));d=n.apply(window,l)}var c=r.find('input[type!="submit"],select,textarea,button').addBack('input[type!="submit"],select,textarea,button');d?c.each(function(){!1===i?($(this).prop("disabled",!0),$(this).trigger("disable")):i.disable()}):c.each(function(){!1===i?($(this).prop("disabled",!1),$(this).trigger("enable")):i.enable()})},type:"disable"};return Object.defineProperty(s,"variables",{enumerable:!0,configurable:!0,get:function(){return a.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),function(){"function"==typeof(r=t.node).get(0).getBlock&&(i=r.get(0).getBlock());for(var s=r.attr("data-hex-disable"),l=e.utils.exprToFunc(s),d=0,u=l.vars.length;d<u;d++)a.push(l.vars[d]);o=l.functionVars,n=new Function(l.functionVars.join(","),l.func)}(),s},e}(hex=function(e){"use strict";return e.directives.If=function(t){var r,n,a,i,o,s=[],l=[],d={render:function(s){var d=e.utils.objectProperty(s,t.block.namespaceFull),u=[],c=!1;if(!e.utils.isEmpty(d)){for(var f in l)u.push(e.utils.objectProperty(d,l[f]));c=n.apply(window,u)}!0===c?void 0===r&&((r=i.clone(!1)).insertAfter(a),o.addBlock(r)):void 0!==r&&(void 0!==r.get(0).getBlock?(r.get(0).getBlock().remove(),r=void 0):r.hide())},type:"if"};return Object.defineProperty(d,"variables",{enumerable:!0,configurable:!0,get:function(){return s.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),function(){r=t.node,d.node=r,(i=r.clone(!1)).attr("data-hex-block","");var u=r.attr("data-hex-if");o=t.block;for(var c=e.utils.exprToFunc(u),f=0,v=c.vars.length;f<v;f++)s.push(c.vars[f]);l=c.functionVars,n=new Function(c.functionVars.join(","),c.func),(a=$(document.createComment("* hex-if *"))).insertBefore(r.get(0)),i.removeAttr("data-hex-if"),r.remove(),r=void 0}(),d},e}(hex=function(e){"use strict";return e.directives.Show=function(t){var r,n,a=[],i=[],o={render:function(a){var o=e.utils.objectProperty(a,t.block.namespaceFull),s=[],l=!1;if(!e.utils.isEmpty(o)){for(var d in i)s.push(e.utils.objectProperty(o,i[d]));l=n.apply(window,s)}l?r.removeClass("hide"):r.addClass("hide")},type:"show"};return Object.defineProperty(o,"variables",{enumerable:!0,configurable:!0,get:function(){return a.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),function(){(r=$(t.node)).addClass("hide");for(var o=r.attr("data-hex-show"),s=e.utils.exprToFunc(o),l=0,d=s.vars.length;l<d;l++)a.push(s.vars[l]);i=s.functionVars,n=new Function(s.functionVars.join(","),s.func)}(),o},e}(hex=function(e){"use strict";return e.directives.Bind=function(t){var r,n,a,i=[],o=[],s={render:function(i){var s=e.utils.objectProperty(i,t.block.namespaceFull);void 0===s&&(s={});var l=[];for(var d in o)l.push(e.utils.objectProperty(s,o[d]));var u=a.apply(window,l);switch(n){case"html":r.get(0).innerHTML=u;break;case"id":r.attr(n,u);break;default:if(r.attr(n,u),/^data-/.test(n)){var c=n.replace("data-","");r.data(c,u),r.attr(n,u)}}},type:"bind"};return Object.defineProperty(s,"variables",{enumerable:!0,configurable:!0,get:function(){return i.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),function(){r=t.node,s.node=r;var l=r.attr(t.attribute);n=t.attribute.replace("data-hex-bind-","");for(var d=e.utils.exprToFunc(l),u=0,c=d.vars.length;u<c;u++)i.push(d.vars[u]);o=d.functionVars,a=new Function(d.functionVars.join(","),d.func)}(),s},e}(hex=function(){"use strict";var e={widgets:{},validators:{},directives:{},utils:{}};return e.utils.toCamel=function(e){return e.replace(/[-_]([a-z])/g,function(e){return e[1].toUpperCase()})},e.utils.isInt=function(e){return!isNaN(e)&&function(e){return(0|e)===e}(parseFloat(e))},e.utils.arrayUniq=function(e){for(var t={},r=[],n=e.length,a=0,i=0;i<n;i++){var o=e[i];1!==t[o]&&(t[o]=1,r[a++]=o)}return r},e.utils.exprToFunc=function(e){for(var t=e,r=[],n=[],a=(e=e.replace(/\[['"]/g,".").replace(/['"]]/g,"").replace(/\[(\D+)]/,".$1")).replace(/'[^']*'/g,"").replace(/"[^"]*"/g,"").match(/([a-z_$][a-z_$.0-9\[\]'"]+)/gi),i=0,o=a.length;i<o;i++){var s=a[i];if(""!==s&&"undefined"!==s){var l=s.split("."),d=s.replace(/['"]/gi,"").replace(/\[/g,".").replace(/]/g,"").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"");-1===n.indexOf(l[0])&&(/^this/gi.test(l[0])||n.push(l[0])),d="['"+d.split(".").join("']['")+"']",-1===r.indexOf(d)&&(/^\[\'this\'\]/gi.test(d)||r.push(d))}}return t="return ("+t+");",{vars:r,functionVars:n,func:t}},e.utils.objectExtend=function(t,r){void 0===r&&(r={});for(var n in t){var a=Object.getOwnPropertyDescriptor(t,n);$.isFunction(a.set)?void 0!==r[n]&&(t[n]=r[n]):$.isArray(t[n])||$.isPlainObject(t[n])?e.utils.objectExtend(t[n],r[n]):void 0===r[n]||($.isArray(t)?t.push(r):t[n]=r[n])}for(var i in r){var o=Object.getOwnPropertyDescriptor(t,i);void 0!==o&&$.isFunction(o.set)?t[i]=r[i]:JSON.stringify(t[i])!==JSON.stringify(r[i])&&($.isArray(r[i])?(void 0===t[i]&&(t[i]=[]),e.utils.objectExtend(t[i],r[i])):$.isPlainObject(r[i])?(void 0===t[i]&&(t[i]={}),e.utils.objectExtend(t[i],r[i])):t[i]=r[i])}},e.utils.objectProperty=function(t,r,n){if(e.utils.isEmpty(r))return t;var a=r.replace(/['"]/g,"").replace(/[\[\]]/g,".").replace(/\.+/g,".").replace(/\.$/,"").split("."),i=a.length-1,o=t;if(void 0!==n)for(var s=0;s<=i;s++){var l=a[s];""!==l&&(s<i?(""===o&&(o={}),void 0===o[l]&&(e.utils.isInt(l)?o[l]=[]:o[l]={}),o=o[l]):o[l]=n)}else for(var d=0;d<=i;d++){var u=a[d];if(""!==u){if(!(d<i)){if(e.utils.isEmpty(o))return;return o[u]}if(void 0===o[u])return;o=o[u]}}},e.utils.isEmpty=function(e){return!!(null===e||!1===e||void 0===e||""===e||$.isArray(e)&&0===e.length)},e.utils.getAttributes=function(e){for(var t={},r=e[0].attributes,n=r.length,a=0;a<n;a++)t[r[a].name.toLowerCase()]=r[a].value;return t},e.utils.clearValues=function(e){for(var t in e)/^\$(.*)/.test(t)&&delete e[t];return e},e.utils.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r,n,a,i,o;return a=2147483648&e,i=2147483648&t,r=1073741824&e,n=1073741824&t,o=(1073741823&e)+(1073741823&t),r&n?2147483648^o^a^i:r|n?1073741824&o?3221225472^o^a^i:1073741824^o^a^i:o^a^i}function n(e,n,a,i,o,s,l){return e=r(e,r(r(function(e,t,r){return e&t|~e&r}(n,a,i),o),l)),r(t(e,s),n)}function a(e,n,a,i,o,s,l){return e=r(e,r(r(function(e,t,r){return e&r|t&~r}(n,a,i),o),l)),r(t(e,s),n)}function i(e,n,a,i,o,s,l){return e=r(e,r(r(function(e,t,r){return e^t^r}(n,a,i),o),l)),r(t(e,s),n)}function o(e,n,a,i,o,s,l){return e=r(e,r(r(function(e,t,r){return t^(e|~r)}(n,a,i),o),l)),r(t(e,s),n)}function s(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var l,d,u,c,f,v,p,h,g,m=[];for(m=function(e){for(var t,r=e.length,n=r+8,a=16*((n-n%64)/64+1),i=new Array(a-1),o=0,s=0;s<r;)o=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<o,s++;return t=(s-s%4)/4,o=s%4*8,i[t]=i[t]|128<<o,i[a-2]=r<<3,i[a-1]=r>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)),v=1732584193,p=4023233417,h=2562383102,g=271733878,l=0;l<m.length;l+=16)d=v,u=p,c=h,f=g,p=o(p=o(p=o(p=o(p=i(p=i(p=i(p=i(p=a(p=a(p=a(p=a(p=n(p=n(p=n(p=n(p,h=n(h,g=n(g,v=n(v,p,h,g,m[l+0],7,3614090360),p,h,m[l+1],12,3905402710),v,p,m[l+2],17,606105819),g,v,m[l+3],22,3250441966),h=n(h,g=n(g,v=n(v,p,h,g,m[l+4],7,4118548399),p,h,m[l+5],12,1200080426),v,p,m[l+6],17,2821735955),g,v,m[l+7],22,4249261313),h=n(h,g=n(g,v=n(v,p,h,g,m[l+8],7,1770035416),p,h,m[l+9],12,2336552879),v,p,m[l+10],17,4294925233),g,v,m[l+11],22,2304563134),h=n(h,g=n(g,v=n(v,p,h,g,m[l+12],7,1804603682),p,h,m[l+13],12,4254626195),v,p,m[l+14],17,2792965006),g,v,m[l+15],22,1236535329),h=a(h,g=a(g,v=a(v,p,h,g,m[l+1],5,4129170786),p,h,m[l+6],9,3225465664),v,p,m[l+11],14,643717713),g,v,m[l+0],20,3921069994),h=a(h,g=a(g,v=a(v,p,h,g,m[l+5],5,3593408605),p,h,m[l+10],9,38016083),v,p,m[l+15],14,3634488961),g,v,m[l+4],20,3889429448),h=a(h,g=a(g,v=a(v,p,h,g,m[l+9],5,568446438),p,h,m[l+14],9,3275163606),v,p,m[l+3],14,4107603335),g,v,m[l+8],20,1163531501),h=a(h,g=a(g,v=a(v,p,h,g,m[l+13],5,2850285829),p,h,m[l+2],9,4243563512),v,p,m[l+7],14,1735328473),g,v,m[l+12],20,2368359562),h=i(h,g=i(g,v=i(v,p,h,g,m[l+5],4,4294588738),p,h,m[l+8],11,2272392833),v,p,m[l+11],16,1839030562),g,v,m[l+14],23,4259657740),h=i(h,g=i(g,v=i(v,p,h,g,m[l+1],4,2763975236),p,h,m[l+4],11,1272893353),v,p,m[l+7],16,4139469664),g,v,m[l+10],23,3200236656),h=i(h,g=i(g,v=i(v,p,h,g,m[l+13],4,681279174),p,h,m[l+0],11,3936430074),v,p,m[l+3],16,3572445317),g,v,m[l+6],23,76029189),h=i(h,g=i(g,v=i(v,p,h,g,m[l+9],4,3654602809),p,h,m[l+12],11,3873151461),v,p,m[l+15],16,530742520),g,v,m[l+2],23,3299628645),h=o(h,g=o(g,v=o(v,p,h,g,m[l+0],6,4096336452),p,h,m[l+7],10,1126891415),v,p,m[l+14],15,2878612391),g,v,m[l+5],21,4237533241),h=o(h,g=o(g,v=o(v,p,h,g,m[l+12],6,1700485571),p,h,m[l+3],10,2399980690),v,p,m[l+10],15,4293915773),g,v,m[l+1],21,2240044497),h=o(h,g=o(g,v=o(v,p,h,g,m[l+8],6,1873313359),p,h,m[l+15],10,4264355552),v,p,m[l+6],15,2734768916),g,v,m[l+13],21,1309151649),h=o(h,g=o(g,v=o(v,p,h,g,m[l+4],6,4149444226),p,h,m[l+11],10,3174756917),v,p,m[l+2],15,718787259),g,v,m[l+9],21,3951481745),v=r(v,d),p=r(p,u),h=r(h,c),g=r(g,f);return(s(v)+s(p)+s(h)+s(g)).toLowerCase()},e}())))))))))))))))))))))))))))));