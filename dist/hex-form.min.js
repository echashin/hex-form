var hex=function(){"use strict";var e={widgets:{},validators:{},directives:{},utils:{}};return e.utils.toCamel=function(e){return e.replace(/[-_]([a-z])/g,function(e){return e[1].toUpperCase()})},e.utils.isInt=function(e){return!isNaN(e)&&function(e){return(0|e)===e}(parseFloat(e))},e.utils.arrayUniq=function(e){for(var t={},n=[],r=e.length,a=0,i=0;r>i;i++){var o=e[i];1!==t[o]&&(t[o]=1,n[a++]=o)}return n},e.utils.exprToFunc=function(e){var t=e.split("##");e=t[0],e=e.replace(/\[['"]/g,".").replace(/['"]]/g,"").replace(/\[(\D+)]/,".$1");for(var n=/([a-z_$][a-z_$.0-9\[\]'"]+)/gi,r=[],a=e.replace(/'[^']*'/g,"").replace(/"[^"]*"/g,"").match(n),i=0,o=a.length;o>i;i++){var s=a[i];if(""!==s&&"undefined"!==s){var l=s.replace(/['"]/gi,"").replace(/\[/g,".").replace(/]/g,"").replace(/\.+/g,".").replace(/^\./,"").replace(/\.$/,"");if(l="['"+l.split(".").join("']['")+"']",-1===r.indexOf(l)){r.push(l);var u="[^a-z0-9_\\[\\]\\+\\=\\-\\|\\&\\!\\/\\*\\\"'\\040]*";u+=s.replace(/#/g,"\\#").replace(/\$/g,"\\$").replace(/\./g,"\\.").replace(/\[/g,"\\[").replace(/]/g,"\\]"),u+="[^a-z0-9_\\[\\]\\+\\=\\-\\|\\&\\!\\/\\*\\\"'\\040]*";var c=new RegExp(u,"g");e=e.replace(c,"__data"+l)}}}if(t.length>1)for(var d=1;d<t.length;d++)e=t[d]+"("+e+")";var f='var r="";try{var r='+e+';}catch (e){console.warn(e);return "error"};return r;';return{vars:r,func:f}},e.utils.objectExtend=function(t,n){void 0===n&&(n={});for(var r in t){var a=Object.getOwnPropertyDescriptor(t,r);$.isFunction(a.set)?t[r]=n[r]:$.isArray(t[r])||$.isPlainObject(t[r])?e.utils.objectExtend(t[r],n[r]):void 0===n[r]||($.isArray(t)?t.push(n):t[r]=n[r])}for(var i in n){var o=Object.getOwnPropertyDescriptor(t,r);$.isFunction(o.set)?t[i]=n[i]:JSON.stringify(t[i])!==JSON.stringify(n[i])&&($.isArray(n[i])?(void 0===t[i]&&(t[i]=[]),e.utils.objectExtend(t[i],n[i])):$.isPlainObject(n[i])?(void 0===t[i]&&(t[i]={}),e.utils.objectExtend(t[i],n[i])):t[i]=n[i])}},e.utils.objectProperty=function(t,n,r){if(e.utils.isEmpty(n))return t;var a=n.replace(/['"]/g,"").replace(/[\[\]]/g,".").replace(/\.+/g,".").replace(/\.$/,"").split("."),i=a.length-1,o=t;if(void 0!==r)for(var s=0;i>=s;s++){var l=a[s];""!==l&&(i>s?(""===o&&(o={}),void 0===o[l]&&(e.utils.isInt(l)?o[l]=[]:o[l]={}),o=o[l]):o[l]=r)}else for(var u=0;i>=u;u++){var c=a[u];if(""!==c){if(!(i>u)){if(e.utils.isEmpty(o))return;return o[c]}if(void 0===o[c])return;o=o[c]}}},e.utils.isEmpty=function(e){return!!(null===e||e===!1||void 0===e||""===e||$.isArray(e)&&0===e.length)},e.utils.getAttributes=function(e){for(var t={},n=e[0].attributes,r=n.length,a=0;r>a;a++)t[n[a].name.toLowerCase()]=n[a].value;return t},e.utils.clearValues=function(t){for(var n in t)/^\$(.*)/.test(n)&&delete t[n],e.utils.isEmpty(t[n])||!$.isArray(t[n])&&"object"!=typeof t[n]||(t[n]=e.utils.clearValues(t[n]));return t},e.utils.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,a,i,o;return a=2147483648&e,i=2147483648&t,n=1073741824&e,r=1073741824&t,o=(1073741823&e)+(1073741823&t),n&r?2147483648^o^a^i:n|r?1073741824&o?3221225472^o^a^i:1073741824^o^a^i:o^a^i}function r(e,t,n){return e&t|~e&n}function a(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function s(e,a,i,o,s,l,u){return e=n(e,n(n(r(a,i,o),s),u)),n(t(e,l),a)}function l(e,r,i,o,s,l,u){return e=n(e,n(n(a(r,i,o),s),u)),n(t(e,l),r)}function u(e,r,a,o,s,l,u){return e=n(e,n(n(i(r,a,o),s),u)),n(t(e,l),r)}function c(e,r,a,i,s,l,u){return e=n(e,n(n(o(r,a,i),s),u)),n(t(e,l),r)}function d(e){for(var t,n=e.length,r=n+8,a=(r-r%64)/64,i=16*(a+1),o=new Array(i-1),s=0,l=0;n>l;)t=(l-l%4)/4,s=l%4*8,o[t]=o[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,o[t]=o[t]|128<<s,o[i-2]=n<<3,o[i-1]=n>>>29,o}function f(e){var t,n,r="",a="";for(n=0;3>=n;n++)t=e>>>8*n&255,a="0"+t.toString(16),r+=a.substr(a.length-2,2);return r}function v(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var p,h,g,m,b,x,k,w,y,$=[],E=7,O=12,C=17,D=22,j=5,P=9,S=14,F=20,V=4,N=11,B=16,z=23,I=6,L=10,A=15,T=21;for(e=v(e),$=d(e),x=1732584193,k=4023233417,w=2562383102,y=271733878,p=0;p<$.length;p+=16)h=x,g=k,m=w,b=y,x=s(x,k,w,y,$[p+0],E,3614090360),y=s(y,x,k,w,$[p+1],O,3905402710),w=s(w,y,x,k,$[p+2],C,606105819),k=s(k,w,y,x,$[p+3],D,3250441966),x=s(x,k,w,y,$[p+4],E,4118548399),y=s(y,x,k,w,$[p+5],O,1200080426),w=s(w,y,x,k,$[p+6],C,2821735955),k=s(k,w,y,x,$[p+7],D,4249261313),x=s(x,k,w,y,$[p+8],E,1770035416),y=s(y,x,k,w,$[p+9],O,2336552879),w=s(w,y,x,k,$[p+10],C,4294925233),k=s(k,w,y,x,$[p+11],D,2304563134),x=s(x,k,w,y,$[p+12],E,1804603682),y=s(y,x,k,w,$[p+13],O,4254626195),w=s(w,y,x,k,$[p+14],C,2792965006),k=s(k,w,y,x,$[p+15],D,1236535329),x=l(x,k,w,y,$[p+1],j,4129170786),y=l(y,x,k,w,$[p+6],P,3225465664),w=l(w,y,x,k,$[p+11],S,643717713),k=l(k,w,y,x,$[p+0],F,3921069994),x=l(x,k,w,y,$[p+5],j,3593408605),y=l(y,x,k,w,$[p+10],P,38016083),w=l(w,y,x,k,$[p+15],S,3634488961),k=l(k,w,y,x,$[p+4],F,3889429448),x=l(x,k,w,y,$[p+9],j,568446438),y=l(y,x,k,w,$[p+14],P,3275163606),w=l(w,y,x,k,$[p+3],S,4107603335),k=l(k,w,y,x,$[p+8],F,1163531501),x=l(x,k,w,y,$[p+13],j,2850285829),y=l(y,x,k,w,$[p+2],P,4243563512),w=l(w,y,x,k,$[p+7],S,1735328473),k=l(k,w,y,x,$[p+12],F,2368359562),x=u(x,k,w,y,$[p+5],V,4294588738),y=u(y,x,k,w,$[p+8],N,2272392833),w=u(w,y,x,k,$[p+11],B,1839030562),k=u(k,w,y,x,$[p+14],z,4259657740),x=u(x,k,w,y,$[p+1],V,2763975236),y=u(y,x,k,w,$[p+4],N,1272893353),w=u(w,y,x,k,$[p+7],B,4139469664),k=u(k,w,y,x,$[p+10],z,3200236656),x=u(x,k,w,y,$[p+13],V,681279174),y=u(y,x,k,w,$[p+0],N,3936430074),w=u(w,y,x,k,$[p+3],B,3572445317),k=u(k,w,y,x,$[p+6],z,76029189),x=u(x,k,w,y,$[p+9],V,3654602809),y=u(y,x,k,w,$[p+12],N,3873151461),w=u(w,y,x,k,$[p+15],B,530742520),k=u(k,w,y,x,$[p+2],z,3299628645),x=c(x,k,w,y,$[p+0],I,4096336452),y=c(y,x,k,w,$[p+7],L,1126891415),w=c(w,y,x,k,$[p+14],A,2878612391),k=c(k,w,y,x,$[p+5],T,4237533241),x=c(x,k,w,y,$[p+12],I,1700485571),y=c(y,x,k,w,$[p+3],L,2399980690),w=c(w,y,x,k,$[p+10],A,4293915773),k=c(k,w,y,x,$[p+1],T,2240044497),x=c(x,k,w,y,$[p+8],I,1873313359),y=c(y,x,k,w,$[p+15],L,4264355552),w=c(w,y,x,k,$[p+6],A,2734768916),k=c(k,w,y,x,$[p+13],T,1309151649),x=c(x,k,w,y,$[p+4],I,4149444226),y=c(y,x,k,w,$[p+11],L,3174756917),w=c(w,y,x,k,$[p+2],A,718787259),k=c(k,w,y,x,$[p+9],T,3951481745),x=n(x,h),k=n(k,g),w=n(w,m),y=n(y,b);var _=f(x)+f(k)+f(w)+f(y);return _.toLowerCase()},e}(),hex=function(e){"use strict";return e.directives.Bind=function(t){function n(n){switch(n=e.utils.objectProperty(n,t.block.namespaceFull),void 0===n&&(n={}),i){case"html":a.get(0).innerHTML=o(n);break;case"id":o(n);a.attr(i,o(n));break;default:if(a.attr(i,o(n)),/^data-/.test(i)){var r=i.replace("data-","");a.data(r,o(n)),a.attr(i,o(n))}}}function r(){a=t.node,l.node=a;var n=a.attr(t.attribute);i=t.attribute.replace("data-hex-bind-","");for(var r=e.utils.exprToFunc(n),u=0,c=r.vars.length;c>u;u++)s.push(r.vars[u]);o=new Function("__data",r.func)}var a,i,o,s=[],l={render:n,type:"bind"};return Object.defineProperty(l,"variables",{enumerable:!0,configurable:!0,get:function(){return s.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),r(),l},e}(hex),hex=function(e){"use strict";return e.directives.Show=function(t){function n(n){n=e.utils.objectProperty(n,t.block.namespaceFull);var r=!1;e.utils.isEmpty(n)||(r=i.call(null,n)),r?a.removeClass("hide"):a.addClass("hide")}function r(){a=$(t.node),a.addClass("hide");for(var n=a.attr("data-hex-show"),r=e.utils.exprToFunc(n),s=0,l=r.vars.length;l>s;s++)o.push(r.vars[s]);i=new Function("__data",r.func)}var a,i,o=[],s={render:n,type:"show"};return Object.defineProperty(s,"variables",{enumerable:!0,configurable:!0,get:function(){return o.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),r(),s},e}(hex),hex=function(e){"use strict";return e.directives.If=function(t){function n(n){n=e.utils.objectProperty(n,t.block.namespaceFull);var r=!1;void 0!==n&&(r=i.call(null,n)),r===!0?void 0===a&&(a=s.clone(!1),a.insertAfter(o),l.addBlock(a)):void 0!==a&&(void 0!==a.get(0).getBlock?(a.get(0).getBlock().remove(),a=void 0):a.hide())}function r(){a=t.node,c.node=a,s=a.clone(!1),s.attr("data-hex-block","");var n=a.attr("data-hex-if");l=t.block;for(var r=e.utils.exprToFunc(n),d=0,f=r.vars.length;f>d;d++)u.push(r.vars[d]);i=new Function("__data",r.func),o=$(document.createComment("* hex-if *")),o.insertBefore(a.get(0)),s.removeAttr("data-hex-if"),a.remove(),a=void 0}var a,i,o,s,l,u=[],c={render:n,type:"if"};return Object.defineProperty(c,"variables",{enumerable:!0,configurable:!0,get:function(){return u.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),r(),c},e}(hex),hex=function(e){"use strict";return e.directives.Disable=function(t){function n(n){n=e.utils.objectProperty(n,t.block.namespaceFull);var r=i.call(null,n),o=a.find('input[type!="submit"],select,textarea,button').addBack('input[type!="submit"],select,textarea,button');r?o.each(function(){s===!1?($(this).prop("disabled",!0),$(this).trigger("disable")):s.disable()}):o.each(function(){s===!1?($(this).prop("disabled",!1),$(this).trigger("enable")):s.enable()})}function r(){a=t.node,"function"==typeof a.get(0).getBlock&&(s=a.get(0).getBlock());for(var n=a.attr("data-hex-disable"),r=e.utils.exprToFunc(n),l=0,u=r.vars.length;u>l;l++)o.push(r.vars[l]);i=new Function("__data",r.func)}var a,i,o=[],s=!1,l={render:n,type:"disable"};return Object.defineProperty(l,"variables",{enumerable:!0,configurable:!0,get:function(){return o.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),r(),l},e}(hex),hex=function(e){"use strict";return e.directives.List=function(t){function n(){return f}function r(e,t){void 0===b[e]&&(b[e]=[]),b[e].indexOf(t)<0&&b[e].push(t)}function a(e,t){void 0!==b[e]&&b[e].splice(b[e].indexOf(t),1)}function i(e,t){if(void 0===b[e])return!0;for(var n in b[e]){var r=b[e][n];r(t)}}function o(){var e=d.clone(!1);e.attr("data-hex-block",f),c.children(m).size()>0?e.insertAfter(c.children(m).last()):c.prepend(e);var t=p.addBlock(e);return i("add",e),p.render.draw(),t}function s(e){if(console.info("list.remove"),!g&&1===c.children(m).size())return!1;var t=e+1,n=c.children(m+":nth-child("+t+")").first();n.size()>0&&n.get(0).getBlock().remove(),c.children(m).each(function(e){var t=$(this).get(0).getBlock(),n=t.getData();if(n.$index=e,t.childBlocks.length>0)for(var r=0,a=t.childBlocks.length;a>r;r++)t.childBlocks[r].getData().$parentIndex=e;$(this).get(0).getBlock().render.draw()}),i("remove",e)}function l(){var t=c.children(m),n=-1;t.each(function(e){var t=$(this).get(0).getBlock().getData(),r=v.indexOf(t);-1!==r&&void 0!==t||($(this).get(0).getBlock().remove(),n=e)}),t=c.children(m);for(var r in v)if(!e.utils.isEmpty(v[r])){for(var a=!1,s=0,l=t.length;l>s;s++)t[s].getBlock().getData()===v[r]&&(a=!0);a||(o(),t=c.children(m))}n>-1&&i("remove",n)}function u(){c=$(t.node),p=t.block,f=c.attr("data-hex-list"),void 0===f&&console.warn("list don`t have namespace");var n=p.getData();void 0===n[f]&&e.utils.objectProperty(n,f,[]),v=n[f],void 0!==c.attr("data-hex-list-allowempty")&&(g=!0),m='[data-hex-block="'+f+'"]',d=c.children("[data-hex-list-tpl]").first().clone(!1).removeAttr("data-hex-list-tpl"),c.children("[data-hex-list-tpl]").first().remove(),d.find('a[data-toggle="tab"]').size()>0&&(r("add",function(e){window.setTimeout(function(){e.find('a[data-toggle="tab"]').click()},1)}),r("remove",function(e){var t=e+1;window.setTimeout(function(){var e=c.find(m+":nth-child("+t+")").first();if(e.size()>0)e.find('a[data-toggle="tab"]').click();else{t--;var n=c.find(m+":nth-child("+t+")").first();n.size()>0&&n.find('a[data-toggle="tab"]').click()}},1)})),h.push("['"+f+"']")}var c,d,f,v,p,h=[],g=!1,m="[data-hex-block]",b={},x={type:"list",getNamespace:n,render:l,on:r,off:a,trigger:i,add:o,remove:s};return Object.defineProperty(x,"variables",{enumerable:!0,configurable:!0,get:function(){return h.map(function(e){return t.block.namespaceFull+e})},set:function(){}}),u(),x},e}(hex),hex=function(e){"use strict";return e.directives.ListAdd=function(e){function t(e,t){void 0===s[e]&&(s[e]=[]),s[e].indexOf(t)<0&&s[e].push(t)}function n(e,t){void 0!==s[e]&&s[e].splice(s[e].indexOf(t),1)}function r(e,t){if(void 0===s[e])return!0;for(var n in s[e]){var r=s[e][n];r(t)}}function a(e){i=$(e.node),o=i.attr("data-hex-list-add"),void 0!==i.attr("data-hex-list-add-item")&&(l=JSON.parse(i.attr("data-hex-list-add-item"))),i.on("click",function(e){e.preventDefault(),r("add",{namespace:o,item:l})})}var i,o,s={},l={},u={on:t,off:n,trigger:r};return a(e),u},e}(hex),hex=function(e){"use strict";return e.directives.ListRemove=function(t){function n(e,t){void 0===u[e]&&(u[e]=[]),u[e].indexOf(t)<0&&u[e].push(t)}function r(e,t){void 0!==u[e]&&u[e].splice(u[e].indexOf(t),1)}function a(e,t){if(void 0===u[e])return!0;for(var n in u[e]){var r=u[e][n];r(t)}}function i(n){if(!d){var r=e.utils.objectProperty(n,t.block.parent.namespaceFull+l),a=0;e.utils.isEmpty(r)||(a=r.length),2>a?s.prop("disabled",!0):s.prop("disabled",!1)}}function o(e){s=$(e.node),l=s.closest("[data-hex-list]").attr("data-hex-list"),void 0!==s.closest("[data-hex-list]").attr("data-hex-list-allowempty")&&(d=!0),c.push("['"+l+"']"),s.on("click",function(e){e.preventDefault();var t=$(this).closest("[data-hex-block]").get(0).getBlock().getData();a("remove",{namespace:l,data:t})})}var s,l,u={},c=[],d=!1,f={render:i,on:n,off:r,trigger:a};return Object.defineProperty(f,"variables",{enumerable:!0,configurable:!0,get:function(){return c.map(function(e){return t.block.parent.namespaceFull+e})},set:function(){}}),o(t),f},e}(hex),hex=function(e){"use strict";return e.widgets.passwordShow=function(e){function t(){r=e.getInputs()[0],n=r.closest(".form-group").find("button.password-show"),n.bind("click",function(e){return e.preventDefault(),"password"===a?(r.attr("type","text"),n.addClass("active"),a="text"):(r.attr("type","password"),n.removeClass("active"),a="password"),r.focus(),!1})}var n,r,a="password";t()},e}(hex),hex=function(e){"use strict";return e.widgets.passwordStrength=function(e){function t(e){return o=e.length>8?1:0,s=e.match(d)?1:0,l=e.match(f)?1:0,u=e.match(v)?1:0,c=e.match(p)?1:0,o+s+l+u+c}function n(){r=e.getInputs()[0],a=r.closest(".form-group").find(".password-strength div"),r.bind("keyup change",function(){var e=r.val();a.attr("class","s-"+t(e))})}var r,a,i=this,o=0,s=0,l=0,u=0,c=0,d=new RegExp("[A-ZА-Я]"),f=new RegExp("[a-zа-я]"),v=new RegExp("[0-9]"),p=new RegExp("([!,%,&,@,#,$,^,*,?,_,~])");i.weight=0,n()},e}(hex),hex=function(e){"use strict";var t=$("html").attr("lang");if(e.utils.isEmpty(t))throw new Error("Doesn`t set lang attr in html tag");return moment.locale(t.toLowerCase()),e.widgets.date=function(t,n){function r(){a=t.getInputs()[0];var r=moment.localeData(),u=r.longDateFormat("L");void 0!==n.timePicker&&n.timePicker===!0&&(u+=" "+r.longDateFormat("LT"));var c={autoUpdateInput:!1,linkedCalendars:!1,singleDatePicker:!0,locale:{format:u,separator:" - ",applyLabel:"Готово",cancelLabel:"Отмена",fromLabel:"От",toLabel:"До",customRangeLabel:"Custom",daysOfWeek:moment.weekdaysShort(),monthNames:moment.months(),firstDay:r.firstDayOfWeek()}};void 0!==n.parentMin&&(s=$(n.parentMin).val(),e.utils.isEmpty(s)||(c.minDate=s),i=n.parentMin,delete n.parentMin),void 0!==n.parentMax&&(l=$(n.parentMax).val(),e.utils.isEmpty(l)||(c.maxDate=l),o=n.parentMax,delete n.parentMax),$.extend(c,n);var d=c.locale.format.replace(/[H]/g,"9").replace(/[m]/g,"9").replace(/[D]+/g,"d").replace(/[M]+/g,"m").replace(/[Y]+/g,"y");c.singleDatePicker===!1&&(d+=c.locale.separator+d),a.inputmask(d);var f=function(){var e=a.data("daterangepicker"),t=e.startDate.format(c.locale.format);c.singleDatePicker===!1&&(t+=c.locale.separator+e.endDate.format(c.locale.format)),a.val(t).trigger("change")};a.daterangepicker(c),a.on("apply.daterangepicker",function(){f()});var v=function(){l=$(o).val(),e.utils.isEmpty(l)?(t.disable(),a.val("").trigger("change")):(c.maxDate=l,a.daterangepicker(c),a.on("apply.daterangepicker",function(){f()}),t.enable(),e.utils.isEmpty(a.val())&&(e.utils.isEmpty(s)?(a.data("daterangepicker").setStartDate(l),a.data("daterangepicker").setEndDate(l)):(a.data("daterangepicker").setStartDate(s),a.data("daterangepicker").setEndDate(s))),f())},p=function(){s=$(i).val(),e.utils.isEmpty(s)?(t.disable(),a.val("").trigger("change")):(c.minDate=s,a.daterangepicker(c),a.on("apply.daterangepicker",function(){f()}),t.enable(),e.utils.isEmpty(a.val())&&(a.data("daterangepicker").setStartDate(s),a.data("daterangepicker").setEndDate(s)),f(),o!==!1&&v())};i!==!1&&$(i).on("change",function(){p()}),o!==!1&&$(o).on("change",function(){v()}),o!==!1&&v(),i!==!1&&p()}var a,i=!1,o=!1,s=!1,l=!1;r()},e}(hex),hex=function(e){"use strict";return e.widgets.mask=function(e,t){function n(){if(r=e.getInputs()[0],void 0===t.mask)throw new Error(r.attr("name")+" doesn`t set mask param");a=t.mask,r.inputmask(a)}var r,a;n()},e}(hex),hex=function(e){"use strict";return e.widgets.phone=function(e,t){function n(){r=e.getInputs()[0],void 0!==t.mask&&(a=t.mask),r.inputmask(a)}var r,a="+7(999)999-99-99";n()},e}(hex),hex=function(e){"use strict";return jQuery.fn.rVal=jQuery.fn.val,jQuery.fn.val=function(e){var t=this.attr("data-hex-select-assoc");return"undefined"!=typeof t?this.get(0).assocVal(e):this.rVal.apply(this,arguments)},e.widgets.select2=function(t,n){function r(){var e=o.select2("data"),t=[];for(var n in e)t.push({id:e[n].id,text:e[n].text});return t}function a(e){if($.isArray(e)){var t=[],n=!1;for(var r in e)if($.isPlainObject(e[r])){if(t.push(e[r].id),0===o.find('option[value="'+e[r].id+'"]').length){var a=new Option(e[r].text+"",e[r].id+"",!0,!0);o.append(a),n=!0}}else t.push(e[r]);n&&o.trigger({type:"select2:select",params:{data:e}}),o.rVal(t)}else o.rVal(e);return o}function i(){o=t.getInputs()[0],o.get(0).assocVal=function(e){return void 0!==e?a(e):r()},void 0!==n.templateSelection&&(n.templateSelection=window[n.templateSelection]),void 0!==n.templateResult&&(n.templateResult=window[n.templateResult]);var i=n.placeholder||"",l={theme:"bootstrap",allowClear:!0,placeholder:i,minimumResultsForSearch:10};if(void 0!==n.data){var u=n.data.split("::"),c=u[0],d=o.closest("[data-hex-block]").get(0).getBlock().getData();if(void 0!==u[1]){var f=window[u[1]];n.data=f(e.utils.objectProperty(d,c))}else n.data=e.utils.objectProperty(d,c)}if(void 0!==n.url){s="ajax";var v=o.find("option[selected]");if(n.ajax={url:n.url,method:"POST",dataType:"json",delay:250,data:function(e){return{search:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.rows,pagination:{more:t.page*e.limit<e.total}}},cache:!1},delete n.url,void 0!==n.parent){var p=n.parent.selector,h=n.parent.param||"parent_id";e.utils.isEmpty($(p).val())&&(t.disable(),o.val("").trigger("change")),$(p).on("change",function(){e.utils.isEmpty($(this).val())?(t.disable(),o.val("").trigger("change")):(t.enable(),o.val("").trigger("change"))}),delete n.parent;var g=function(){return $(p).val()};n.ajax.data=function(e){var t={search:e.term,page:e.page};return t[h]=g,t}}}$.extend(l,n),o.select2(l),"ajax"===s&&(v.each(function(){o.append($(this))}),o.trigger("change"))}var o,s="local";i()},e}(hex),hex=function(e){"use strict";return e.widgets.filesimple=function(e){function t(t){e.setValue(t.target.files[0])}function n(){r=e.getInputs()[0],r.bind("change",t)}var r;n()},e}(hex),hex=function(e){"use strict";return e.widgets.fileupload=function(t,n){function r(){var e=[];for(var n in E)E[n].valid&&void 0!==E[n].id&&e.push(parseInt(E[n].id));t.setValue(e),p.trigger("change")}function a(){var e=!1;for(var t in E)if(E[t].loading===!0){e=!0;break}O.loading=e}function i(e,t){var n=x.clone();void 0!==t&&n.addClass(t),n.find("i").attr("title",e.name).html(e.name);var r=n.find(".upload-preview");return void 0!==e.url?(r.attr("href",e.url),void 0!==e.thumb&&r.html('<img src="'+e.thumb+'"/>')):r.hide(),n.get(0).outerHTML}function o(){var e="";for(var t in E)e+=i(E[t]);m.html(e),m.find("thumb").each(function(e){E[e].setElement($(this))})}function s(e){if(y){for(var t in E)E[t].remove(!0);m.find("thumb").remove(),r()}var n=new C({uid:e.uniqueIdentifier,name:e.name,loading:!0}),o=i(n,"upfile-new loading");m.append(o),n.setElement(m.find("thumb:last-child")),E.push(n),n.progress(5),a()}function l(e){for(var t=E.length,n=0;t>=n;n++)if(E[n].uid===e)return E[n];return!1}function u(e,t){var n=l(e.uniqueIdentifier);n!==!1&&n.error(t),a()}function c(e,t){var n=l(e.uniqueIdentifier);n!==!1&&n.complete(t),a()}function d(e){var t=Math.floor(e.size/100),n=Math.floor(e.sizeUploaded()/t),r=l(e.uniqueIdentifier);r!==!1&&r.progress(n)}function f(){var e=[];m.find("thumb").each(function(){var t=$(this).attr("id");for(var n in E)E[n].rid===t&&e.push(E[n])}),E=e,r()}function v(){if(p=t.getInputs()[0],k="u_"+p.attr("id")+"_",void 0!==n.types){b=[];var a=/$[\.]/;for(var i in n.types){var l=n.types[i];a.test(l)||(l="."+l),b.push(l)}}if(n.single===!0&&(y=!0),void 0!==n.limit&&(w=parseInt(n.limit),isNaN(w)&&(w=1),0===w&&(w=0),delete n.limit),void 0===n.url)throw new Error("doesnt set url paremetr on "+t.name);h=n.url;var v={target:h,singleFile:y,simultaneousUploads:5,chunkSize:262144,maxChunkRetries:void 0,allowDuplicateUploads:!1,prioritizeFirstAndLastChunk:!0,generateUniqueIdentifier:function(t){var n="file_";return n+=t.size,n+=t.name,n+=k,n=e.utils.md5(n)}};if(g=new Flow(v),x=p.closest(".form-group").find(".upload-dropzone *").first().clone(!1),p.closest(".form-group").find(".upload-dropzone *").remove(),m=p.closest(".form-group").find(".upload-dropzone"),m.on("dragenter",function(){$(this).addClass("drag")}),m.on("dragover",function(){$(this).addClass("drag")}),m.on("dragend",function(){$(this).removeClass("drag")}),m.on("drop",function(){$(this).removeClass("drag")}),m.on("mouseout",function(){$(this).removeClass("drag")}),m.on("dragleave",function(){$(this).removeClass("drag")}),!y){var O=dragula([m[0]],{mirrorContainer:m.closest(".form-group")[0],direction:"horizontal",copy:!1,copySortSource:!1});O.on("drop",function(){f()})}var D=p.data("hexFiles");if(void 0!==D){for(var j in D){var P=new C(D[j]);E.push(P)}o()}if(r(),g.support){var S={};void 0!==b&&(S.accept=b.join(",")),g.assignBrowse(p.closest(".form-group").find("[data-upload]")[0],!1,y,S),g.assignDrop(m[0]),g.on("fileAdded",function(e){var t=!0;return void 0!==b&&b.indexOf("."+e.getType())<0&&(t=!1),t?s(e):(s(e),u(e,'"'+e.name+'" - неверный тип файла. Разрешены файлы типа: '+b.join(", "))),t}),g.on("fileSuccess",function(e,t){t=$.parseJSON(t),c(e,t)}),g.on("fileError",function(e,t){u(e,t)}),g.on("filesSubmitted",function(){g.upload()}),g.on("fileProgress",function(e){d(e)})}}var p,h,g,m,b,x,k,w=0,y=!1,E=[],O=this;O.loading=!1;var C=function(e){function t(){var e=k;void 0!==i.id&&(e+="_"+i.id),void 0!==i.uid&&(e+="_"+i.uid),i.rid=e,o.attr("id",e)}function n(e){if(void 0!==e)for(var t in e)i.hasOwnProperty(t)&&(i[t]=e[t]);void 0===i.id&&(i.valid=!1)}var i=this;i.id=void 0,i.uid=void 0,i.thumb=void 0,i.url=void 0,i.name=void 0,i.valid=!0,i.rid=0,i.loading=!1;var o;i.setElement=function(e){o=e,o.on("click","remove",function(e){return e.preventDefault(),i.remove(),!1}),t()},i.progress=function(e){i.valid=!1,o.find("p").show().css("width",e+"%")},i.complete=function(e){i.valid=!0,i.loading=!1,n(e),o.removeClass("loading");var t=o.find(".upload-preview");t.attr("href",i.url),t.show(),void 0!==i.thumb&&t.html('<img src="'+i.thumb+'"/>'),o.find("p").hide(),i.loading=!1,r()},i.remove=function(e){i.valid=!1,i.loading=!1;var t=E.indexOf(i);t>=0&&(O.uploaderRemoveFile(i.uid),E.splice(t,1)),e===!0?o.remove():o.fadeOut(function(){o.remove()}),a(),r()},i.error=function(e){i.valid=!1,i.loading=!1,o.find("p").hide(),o.removeClass("loading"),e="! Ошибка:<br/>"+e,o.find(".frame").html('<div class="upload-error">'+e+"</div>"),o.addClass("upfile-error"),o.removeClass("upfile-new");var t=E.indexOf(i);t>=0&&(O.uploaderRemoveFile(i.uid),E.splice(t,1))},n(e)};O.uploaderRemoveFile=function(e){var t=g.files;for(var n in t)if(t[n].uniqueIdentifier===e){g.removeFile(t[n]);break}},v()},e}(hex),hex=function(e){"use strict";return e.widgets.search=function(t,n){function r(e,t){var n=t.length-1;for(n;n>=0;n--)t[n].text.indexOf(e)>-1?t[n].node.removeClass("hidden"):t[n].node.addClass("hidden")}function a(e){var t=e.length-1;for(t;t>=0;t--)e[t].node.removeClass("hidden")}function i(){o=t.getInputs()[0];var i=$(n.selector);i.size()>0&&i.each(function(){s.push({text:$(this).text().toLowerCase(),node:$(this)})}),o.on("change keyup mouseup",function(){var t=o.val().toLowerCase();e.utils.isEmpty(t)?a(s):r(t,s)})}var o,s=[];i()},e}(hex),hex=function(e){"use strict";return e.validators.required=function(t,n){function r(){void 0!==n.events&&a.setEvents(n.events)}var a=this,i=["blur","change"];a.weight=0;var o="required";a.getClassName=function(){return o},a.setEvents=function(e){i=e},a.getEvents=function(){return i},a.isValid=function(t){return!e.utils.isEmpty(t)},void 0!==n&&r()},e}(hex),hex=function(e){"use strict";return e.validators.email=function(t,n){function r(){void 0!==n.events&&a.setEvents(n.events)}var a=this,i="email";a.getClassName=function(){return i};var o=["blur"],s=/^\S+[@]\S+\.\S{2,10}$/im;a.weight=1,a.setEvents=function(e){o=e},a.getEvents=function(){return o},a.isValid=function(t){return e.utils.isEmpty(t)?!0:s.test(t)},r()},e}(hex),hex=function(e){"use strict";return e.validators.unique=function(t,n){function r(){void 0!==n.events&&a.setEvents(n.events),void 0!==n.url&&(s=n.url)}var a=this,i="unique";a.getClassName=function(){return i};var o,s,l=!1,u=!1,c=["blur","change","unique"];a.weight=5,a.setEvents=function(e){c=e},a.getEvents=function(){return c},a.isValid=function(n){return u!==!1&&u.abort(),e.utils.isEmpty(n)||n===o?!0:n===l?!1:(u=$.ajax({url:s,data:{value:n},method:"POST",async:!0,success:function(e){e.success===!0?(o=n,t.validate(!0,"unique")):(l=n,t.validate(!0,"unique"))}}),!0)},r()},e}(hex),hex=function(e){"use strict";return e.validators.stringLength=function(t,n){function r(){void 0!==n.min&&(a=n.min),void 0!==n.max&&(i=n.max),void 0!==n.events&&o.setEvents(n.events)}var a,i,o=this,s="string-length";o.getClassName=function(){return s};var l=["change","blur"];o.weight=3,o.setEvents=function(e){l=e},o.getEvents=function(){return l},o.isValid=function(t){var n=t.length;return e.utils.isEmpty(t)?!0:void 0!==a&&a>n?(s="string-length-min",!1):void 0!==i&&n>i?(s="string-length-max",!1):!0},r()},e}(hex),hex=function(e){"use strict";return e.validators.numSize=function(e,t){function n(){void 0!==t.min&&(r=t.min),void 0!==t.max&&(a=t.max),void 0!==t.round&&(o=t.round),void 0!==t.events&&i.setEvents(t.events)}var r,a,i=this,o=!0,s="num-size";i.getClassName=function(){return s};var l=["blur"];i.weight=3,i.setEvents=function(e){l=e},i.getEvents=function(){return l},i.isValid=function(t){return t=parseInt(t),isNaN(t)&&(t="",o)?(e.setValue(""),!0):void 0!==r&&r>t?(s="num-size-min",o?(e.setValue(r),!0):!1):void 0!==a&&t>a?(s="num-size-max",o?(e.setValue(a),!0):!1):!0},n()},e}(hex),hex=function(e){"use strict";return e.validators.passwordConfirm=e.validators.confirm=function(e,t){function n(){void 0!==t.events&&r.setEvents(t.events),void 0!==t.password&&(o=$(t.password))}var r=this,a="password-confirm";r.getClassName=function(){return a};var i=["change","blur"];r.weight=4;var o;r.setEvents=function(e){i=e},r.getEvents=function(){return i},r.isValid=function(e){return o.val()===e},n()},e}(hex),hex=function(e){"use strict";return e.validators.mask=function(t,n){function r(){void 0!==n.events&&i.setEvents(n.events),a=t.getInputs()[0]}var a,i=this,o="mask",s=["blur"];i.getClassName=function(){return o},i.weight=4,i.setEvents=function(e){s=e},i.getEvents=function(){return s},i.isValid=function(t){if(e.utils.isEmpty(t))return!0;var n=a.inputmask("option","mask");return Inputmask.isValid(a.val(),{alias:n})},r()},e}(hex),hex=function(e){"use strict";return e.validators.phone=function(t,n){function r(){void 0!==n.events&&i.setEvents(n.events),a=t.getInputs()[0]}var a,i=this,o="phone",s=["blur"];i.getClassName=function(){return o},i.weight=4,i.setEvents=function(e){s=e},i.getEvents=function(){return s},i.isValid=function(t){if(e.utils.isEmpty(t))return!0;var n=a.inputmask("option","mask");return Inputmask.isValid(a.val(),{alias:n})},r()},e}(hex),hex=function(e){"use strict";return e.validators.date=function(t,n){function r(){void 0!==n.events&&a.setEvents(n.events),o=t.getInputs()[0]}var a=this,i=["change","blur"];a.weight=3;var o,s="date";a.getClassName=function(){return s},a.setEvents=function(e){i=e},a.getEvents=function(){return i},a.isValid=function(t){if(e.utils.isEmpty(t))return!0;var n=o.inputmask("option","mask");return Inputmask.isValid(o.val(),{alias:n})},r()},e}(hex),hex=function(e){"use strict";return e.Render=function(){function t(){u=[];for(var t=0,n=o.length;n>t;t++)for(var r=0,a=o[t].variables.length;a>r;r++)-1===u.indexOf(o[t].variables[r])&&u.push(o[t].variables[r]);return u=e.utils.arrayUniq(u)}function n(){u=[],l={}}function r(e){if(-1===o.indexOf(e)){o.push(e);for(var t=0,n=e.variables.length;n>t;t++)-1===u.indexOf(e.variables[t])&&u.push(e.variables[t])}}function a(e){o.indexOf(e)>=0&&(o.splice(o.indexOf(e),1),n())}function i(n){var r=[],a=JSON.parse(JSON.stringify(s));0===u.length&&(u=t());for(var i=0,c=u.length;c>i;i++){var d,f=u[i];if(/\[\'\$root\'\]/.test(f)){var v=f.replace(/^(.*)\[\'\$root\'\]/,""),p=f.replace(/\[\'\$root\'\](.*)$/,"");if(/\$parentIndex/.test(v)){var h=p+"['$parentIndex']",g=e.utils.objectProperty(a,h);v=v.replace(/\$parentIndex/,g),e.utils.objectProperty(a,h,g),JSON.stringify(g)!==l[h]&&r.push(h)}d=e.utils.objectProperty(a,v)}else d=e.utils.objectProperty(a,f);void 0===d&&(d=""),e.utils.objectProperty(a,f,d),JSON.stringify(d)!==l[f]&&r.push(f)}if(void 0!==r&&r.length>0){var m=n;if(void 0===n){m=[];for(var b=0,x=o.length;x>b;b++){var k=o[b];for(i=0,c=r.length;c>i;i++)k.variables.indexOf(r[i])>=0&&m.push(k)}}for(i=0;i<m.length;i++)m[i].render(a);for(i=0,c=r.length;c>i;i++)if(/\[\'\$root\'\]/.test(r[i])){var w=r[i].replace(/^(.*)\[\'\$root\'\]/,"");l[r[i]]=JSON.stringify(e.utils.objectProperty(s,w))}else l[r[i]]=JSON.stringify(e.utils.objectProperty(s,r[i]))}}var o=[],s={},l={},u=[],c={directives:o,removeDirective:a,addDirective:r,data:s,draw:i,clear:n};return c},e}(hex),hex=function(e){"use strict";return e.Block=function(t,n){function r(){return D}function a(e){return void 0===e?B:B[e]}function i(){for(var e=0,t=V.length;t>e;e++)V[e].validate(!0)||console.warn(V[e].getName());for(e=0,t=S.length;t>e;e++)S[e].logErrors()}function o(e){P[e.namespace].push({}),y.draw()}function s(){for(var e=0,t=j.length;t>e;e++)y.removeDirective(j[e]);j=[];for(var n=0,r=S.length;r>n;n++)S[n].removeDirectives()}function l(e){var t=n.getData()[e.namespace],r=t.indexOf(e.data);-1!==r&&(t.splice(r,1),s(),y.clear(),y.draw())}function u(e){var t=n.getData()[e.namespace],r=t.indexOf(e.data);if(r>0){var a=r,i=r-1;t.splice(i,0,t.splice(a,1)[0])}for(var o=r+1,s=t.length;s>o;o++)t[o].$index=o;y.draw()}function c(t){var n="[data-hex-bind-html],[data-hex-bind-title],[data-hex-bind-for],[data-hex-bind-class],[data-hex-bind-data-content],[data-hex-bind-id],[data-hex-bind-href],[data-hex-disable],[data-hex-bind-name],[data-hex-bind-src],[data-hex-show],[data-hex-hide],[data-hex-list],[data-hex-list-add],[data-hex-list-remove],[data-hex-list-up],[data-hex-if],[data-hex-data]",r=t.node.find(n).addBack();r.each(function(){var n=$(this);if(0===n.parents("[data-hex-if]").size()&&0===n.closest("[data-hex-list-tpl]").size()&&(n.closest("[data-hex-block]").first().get(0)===t.node.get(0)||n.get(0)===t.node.get(0))){var r=e.utils.getAttributes(n);for(var a in r)if(r.hasOwnProperty(a))switch(a){case"data-hex-bind-html":case"data-hex-bind-css":case"data-hex-bind-title":
case"data-hex-bind-name":case"data-hex-bind-href":case"data-hex-bind-src":case"data-hex-bind-id":case"data-hex-bind-for":case"data-hex-bind-data-content":case"data-hex-bind-class":j.push(new e.directives.Bind({node:n,attribute:a,block:t}));break;case"data-hex-show":j.push(new e.directives.Show({node:n,block:t}));break;case"data-hex-data":j.push(new e.directives.Data({node:n,block:t}));break;case"data-hex-if":j.push(new e.directives.If({node:n,block:t}));break;case"data-hex-disable":j.push(new e.directives.Disable({node:n,block:t}));break;case"data-hex-list":var i=new e.directives.List({node:n,block:t});void 0===B[i.getNamespace()]&&(B[i.getNamespace()]=[]),B[i.getNamespace()].push(i),j.push(i);break;case"data-hex-list-add":var s=new e.directives.ListAdd({node:n});s.on("add",o),z.push(s);break;case"data-hex-list-remove":var c=new e.directives.ListRemove({node:n,block:t});c.on("remove",l),j.push(c);break;case"data-hex-list-up":var d=new e.directives.ListUp({node:n});d.on("up",u),I.push(d)}for(var f=0,v=j.length;v>f;f++)y.addDirective(j[f])}})}function d(){for(var e=0,t=V.length;t>e;e++)V[e].disable()}function f(){for(var e=0,t=V.length;t>e;e++)V[e].enable()}function v(t){e.utils.objectExtend(P,t)}function p(){return P}function h(e){for(var t=!0,n=0,r=V.length;r>n;n++)V[n].validate(e)||(t=!1);for(n=0,r=S.length;r>n;n++)S[n].validate(e)||(t=!1);return C=t}function g(){C=!0;for(var e=0,t=V.length;t>e;e++)V[e].reset();for(e=0,t=S.length;t>e;e++)S[e].reset();y.draw()}function m(e){for(var t=e.getName(),n=t.replace(/['"]/g,"").replace(/[\[\]]/g,".").replace(/\.+/g,".").replace(/\.$/,"").replace(/^\./,"").split("."),r=n.length-1,a=P,i=0;r>=i;i++){var o=n[i];r>i?void 0!==a[o]&&(a=a[o]):void 0!==a[o]&&($.isArray(a)?a.splice(o,1):delete a[o])}var s=V.indexOf(e);-1!==s&&V.splice(s,1)}function b(t){var n=P,r=t.getName(),a=r.replace(/['"]/g,"").replace(/[\[\]]/g,".").replace(/\.+/g,".").replace(/\.$/,"").split(".").filter(function(t){return!e.utils.isEmpty(t)}),i=a.length-1,o=hex.utils.objectProperty(P,r);e.utils.isEmpty(o)||t.setValue(o);for(var s=0;i>=s;s++){var l=a[s];i>s?((e.utils.isEmpty(n[l])||"object"!=typeof n[l])&&(n[l]={}),n=n[l]):Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:t.getValue,set:t.setValue})}t.on("change",function(){y.draw()}),t.on("disable",function(){}),t.on("enable",function(){}),t.on("validate",function(){E.validate(!1),y.draw()})}function x(e,t){var n={};for(var r in e){var a,i=e[r],o=i.attr("name"),s=i.closest(".form-group");s.size()<=0?s=void 0:(a=s.find(".errors"),a.size()<=0&&(a=void 0));var l=i.prop("tagName").toLowerCase(),u=l,c={type:u,inputs:[i],formGroup:s,errorsBlock:a,block:t,name:o};switch(l){case"select":c.type="select";break;case"textarea":c.type="textarea";break;case"input":switch(u=i.attr("type").toLowerCase()){default:c.type=u;break;case"checkbox":u="checkbox",c.type=u,void 0!==i.attr("value")&&(c.trueValue=i.attr("value")),void 0!==i.attr("data-hex-true-value")&&(c.trueValue=i.attr("data-hex-true-value")),void 0!==i.attr("data-hex-false-value")&&(c.falseValue=i.attr("data-hex-false-value"));break;case"radio":c.type="radio"}}void 0===n[o]?n[o]=c:n[o].inputs.push(i)}for(var d in n)n.hasOwnProperty(d)&&V.push(new hex.Control(n[d]));for(var f=0,v=V.length;v>f;f++)b(V[f])}function k(e){var n=[];e.node.find('input[type!="submit"],select,textarea').each(function(){var e=$(this),r=e.closest("[data-hex-block]");0===e.closest("[data-hex-list-tpl]").size()&&0===e.closest("[data-hex-if]").size()&&r.get(0)===t.get(0)&&n.push(e)}),x(n,e),e.node.find("[data-hex-block]").each(function(){var t=$(this);0===t.closest("[data-hex-list-tpl]").size()&&0===t.closest("[data-hex-if]").size()&&t.parents("[data-hex-block]:first").get(0)===e.node.get(0)&&e.addBlock(t)})}function w(){if(L.node=t,t.get(0).getBlock=function(){return L},e.utils.isEmpty(n)?(E=L,n=!1,L.parent=void 0,N=!0,y=L.render=new e.Render,P=y.data,L.namespaceFull=""):(E=n.root,y=L.render=n.render,N=!1),L.root=E,e.utils.isEmpty(t.attr("data-hex-block"))||(F=t.attr("data-hex-block"),O=void 0,t.closest('[data-hex-list="'+F+'"]').size()>0&&(O=t.closest('[data-hex-list="'+F+'"]').children('[data-hex-block="'+F+'"]').index(t))),!N)if(e.utils.isEmpty(F))P=n.getData(),Object.defineProperty(L,"namespaceFull",{enumerable:!0,configurable:!0,get:function(){return n.namespaceFull},set:function(){}});else if(void 0!==O){var r=n.getData();void 0!==r&&(r=r[F],void 0===r[O]?r[O]=P:P=r[O]),Object.defineProperty(P,"$index",{enumerable:!0,configurable:!0,get:function(){var e=n.getData()[F].indexOf(P);return e},set:function(){}}),Object.defineProperty(L,"namespaceFull",{enumerable:!0,configurable:!0,get:function(){return n.namespaceFull+"['"+F+"']['"+P.$index+"']"},set:function(){}})}else{var a=n.getData();void 0!==a&&(void 0===a[F]?a[F]=P:P=a[F]),Object.defineProperty(L,"namespaceFull",{enumerable:!0,configurable:!0,get:function(){return n.namespaceFull+"['"+F+"']"},set:function(){}})}e.utils.isEmpty(t.attr("id"))||(D=t.attr("id"),Object.defineProperty(P,"$"+D,{enumerable:!0,configurable:!0,get:function(){return C},set:function(e){C=e}})),N||void 0===n.getData().$index||Object.defineProperty(P,"$parentIndex",{enumerable:!0,configurable:!0,get:function(){return n.getData().$index},set:function(){}}),Object.defineProperty(P,"$valid",{enumerable:!0,configurable:!0,get:function(){return C},set:function(e){C=e}}),c(L),k(L),y.clear(),y.draw(j)}var y,E,O,C=!0,D=!1,j=[],P={},S=[],F="",V=[],N=!1,B={},z=[],I=[],L={controls:V,parent:n,childBlocks:S,$hexBlock:!0,validate:h,reset:g,getId:r,getLists:a,setData:v,getData:p,disable:d,enable:f,directives:j,removeDirectives:s,logErrors:i};return L.addBlock=function(t){void 0===t.$hexBlock&&(t=new e.Block(t,L));var n=S.indexOf(t);return-1===n?(S.push(t),t):S[n]},L.remove=function(){for(;L.controls.length>0;)m(L.controls[0]);if(s(),!e.utils.isEmpty(n)){if(!e.utils.isEmpty(F)){var r=n.getData()[F];if(void 0!==r)if(r===P)delete n.getData()[F];else if($.isArray(r)){var a=r.indexOf(P);void 0!==a&&-1!==a&&r.splice(a,1)}}var i=n.childBlocks.indexOf(L);-1!==i&&n.childBlocks.splice(i,1)}for(;L.childBlocks.length>0;)L.childBlocks[0].remove();t.remove(),E.validate(!1)},w(),L},e}(hex),hex=function(e){"use strict";return e.Control=function(t){function n(){switch(C){case"text":default:if(void 0!==_.date){var e=V[0].data("daterangepicker");if(void 0===e)return V[0].val();if(""===V[0].val())return!1;var t="",n="YYYY-MM-DD";if(e.timePicker===!0&&(n+=" HH:mm"),t+=e.startDate.format(n),e.singleDatePicker===!1){var r=e.endDate.format(n);t+=" - "+r}return t}return void 0!==_.fileupload||void 0!==_.filesimple?D:V[0].val();case"radio":var a=!1;for(var i in V)V.hasOwnProperty(i)&&(V[i].is(":checked")===!0?(V[i].closest("label").addClass("checked"),a=V[i].val()):V[i].closest("label").removeClass("checked"));return a;case"checkbox":if(V.length<2)return V[0].is(":checked")===!0?(V[0].closest("label").addClass("checked"),R):(V[0].closest("label").removeClass("checked"),q);for(var o=[],s=0,l=V.length;l>s;s++)V[s].is(":checked")===!0?(o.push(V[s].val()),V[s].closest("label").addClass("checked")):(V[s].closest("label").removeClass("checked"),void 0!==V[s].attr("data-hex-false-value")&&o.push(V[s].attr("data-hex-false-value")));return o}}function r(){switch(C){case"file":break;case"checkbox":if(V.length<2)R===D?(V[0].closest("label").addClass("checked"),V[0].prop("checked",!0)):(V[0].closest("label").removeClass("checked"),V[0].prop("checked",!1));else for(var t=0,n=V.length;n>t;t++)-1!==D.indexOf(V[t].val())?(V[t].closest("label").addClass("checked"),V[t].prop("checked",!0)):(V[t].closest("label").removeClass("checked"),V[t].prop("checked",!1));break;case"radio":for(var r in V)V.hasOwnProperty(r)&&(V[r].attr("value")===D?(V[r].prop("checked",!0),V[r].closest("label").addClass("checked")):(V[r].prop("checked",!1),V[r].closest("label").removeClass("checked")));break;case"text":default:if(void 0!==_.date){if(!e.utils.isEmpty(D)){var a=V[0].data("daterangepicker"),i=D.split(" - ");void 0!==i[0]&&a.setStartDate(moment(i[0])),void 0!==i[1]&&a.setEndDate(moment(i[1]))}}else V[0].val(D),V[0].trigger("change")}}function a(){return O}function i(e,t){void 0===B[e]&&(B[e]=[]),B[e].indexOf(t)<0&&B[e].push(t)}function o(e,t){void 0!==B[e]&&B[e].splice(B[e].indexOf(t),1)}function s(e,t){if(void 0===B[e])return!0;for(var n in B[e]){var r=B[e][n];r(t)}}function l(){return V}function u(e){D!==e&&(D=e,r())}function c(){return L?void 0:D}function d(e){return function(t,n){return"number"==typeof t[e]?t[e]-n[e]:t[e]<n[e]?-1:t[e]>n[e]?1:0}}function f(){void 0!==S&&S.removeClass("has-error"),void 0!==F&&F.find("span").removeClass("active")}function v(){if(void 0!==F)for(var e=0,t=N.length;t>e;e++)F.find(".error-"+N[e]).addClass("active");void 0!==S&&S.addClass("has-error")}function p(){P=j,u(j),f()}function h(e){if(void 0===e)return I;if(e!==!1&&e!==!0)throw new Error("Wrong value in readonly method ");for(var t=0,n=V.length;n>t;t++)V[t].prop("readonly",e);I=e}function g(){for(var e=0,t=V.length;t>e;e++)V[e].prop("disabled",!0);L=!0,s("disable"),f()}function m(){for(var e=0,t=V.length;t>e;e++)V[e].prop("disabled",!1);L=!1,s("enable")}function b(e,t){if(e===!1)return A;if(P=D,f(),N=[],!L)for(var n in T)if(T.hasOwnProperty(n)&&(void 0===t||-1!==T[n].getEvents().indexOf(t))&&!T[n].isValid(D)){N.push(T[n].getClassName());break}return N.length>0?(A=!1,v()):(A=!0,f()),s("validate",e),A}function x(t,n){var r={};if(t=e.utils.toCamel(t),void 0!==n&&""!==n&&$.extend(r,jQuery.parseJSON(n)),void 0!==e.validators[t]){var a=new e.validators[t](J,r),i=a.getEvents();for(var o in i)i.hasOwnProperty(o)&&(z[i[o]]=!0);T.push(a)}else console.warn('Validator "'+t+'" not loaded!')}function k(t,n){t=e.utils.toCamel(t);var r={};void 0!==n&&""!==n&&$.extend(r,jQuery.parseJSON(n)),void 0!==e.widgets[t]?_[t]=new e.widgets[t](J,r):console.warn('Widget "'+t+'" not loaded!')}function w(e){b(!0,e.type)}function y(t){V.push(t);var r=e.utils.getAttributes(t);for(var a in r)if(r.hasOwnProperty(a)){var i=a.match(/^data-hex-widget-(.*)$/i);if(null!==i&&void 0!==i[1]&&k(i[1],r[a]),"required"===a)x("required",r[a]);else{var o=a.match(/^data-hex-validator-(.*)$/i);null!==o&&void 0!==o[1]&&x(o[1],r[a])}}t.on("change",function(){D=n(),s("change",D)}),"text"!==C&&"textarea"!==C&&"password"!==C||t.on("keyup",function(){D=n(),t.trigger("change")}),T.sort(d("weight"));for(var l in z)z.hasOwnProperty(l)&&t.on(l,w);t.prop("disabled")&&g(),t.prop("readonly")&&h(!0),t.on("disable",function(){g()}),t.on("enable",function(){m()})}function E(e){if(C=e.type,"checkbox"===C&&(void 0!==e.trueValue&&(R=e.trueValue),void 0!==e.falseValue&&(q=e.falseValue)),O=e.name,void 0===O&&(console.error("Control dont have name"),console.error(e.inputs)),S=e.formGroup,F=e.errorsBlock,void 0!==e.inputs)for(var t in e.inputs)e.inputs.hasOwnProperty(t)&&y(e.inputs[t]);D=j=n(),P=D,f()}var O,C,D,j,P,S,F,V=[],N=[],B={},z={},I=!1,L=!1,A=!0,T=[],_={},R=!0,q=!1,J={getName:a,setValue:u,getValue:c,reset:p,readonly:h,disable:g,enable:m,validate:b,getInputs:l,errors:N,showErrors:v,hideErrors:f,inputs:V,on:i,off:o,trigger:s,toString:function(){return c()},valueOf:function(){return c()},toJSON:function(){return c()}};return E(t),J},e}(hex),hex=function(e){"use strict";function t(t){function n(){var t=JSON.parse(JSON.stringify(o.root.getData()));return e.utils.clearValues(t)}function r(){s.find(".has-error").removeClass("has-error"),s.find(".alerts div").remove()}function a(e){var t=o.trigger("beforeReset",{values:n()});t?window.setTimeout(function(){r(),o.root.reset()},1):e.preventDefault(),o.trigger("afterReset",{})}function i(e,t){var n="";void 0!==t&&(n=t);for(var r in e){var a=e[r];if(r+="",0!==r.indexOf("$")){var o=r;""!==n&&(o=n+"["+r+"]"),$.isArray(a)||$.isPlainObject(a)?i(a,o):c.append(o,a)}}}var o=this;o.errorText="Не удалось сохранить форму, попробуйте обновить страницу",o.invalidText="Форма содержит ошибки";var s=$("#"+t),l={},u="formdata";o.root=void 0;var c=new FormData,d=function(e){this.type=e,this.stoped=!1,this.stop=function(){this.stoped=!0}};o.on=function(e,t){void 0===l[e]&&(l[e]=[]),l[e].indexOf(t)<0&&l[e].push(t)},o.off=function(e,t){void 0!==l[e]&&l[e].splice(l[e].indexOf(t),1)},o.trigger=function(e,t){if(void 0!==l[e]){var n=new d(e);for(var r in l[e]){var a=l[e][r];a(t,n)}return!n.stoped}return!0},o.getHandlers=function(){return l},o.draw=function(){o.root.render.draw()};var f=function(e){e.preventDefault(),e.stopPropagation();var t=n(),a=o.trigger("beforeValidation",{values:t});if(!a)return!1;var l=o.root.validate(!0);if(l===!0){r();var d=o.trigger("beforeSubmit",{values:t});if(d){o.loaderShow();var f=s.attr("action"),v=s.find("button[type=submit]:focus");v.size()>0&&void 0!==v.attr("data-action")&&(f=v.attr("data-action"));var p="POST";void 0!==s.attr("method")&&(p=s.attr("method")),"formdata"===u?i(t):c=t,$.ajax({url:f,data:c,type:p,dataType:"json",processData:!1,contentType:!1,success:function(e){var t=o.trigger("afterSubmit",e);t&&window.setTimeout(function(){if(e.success===!0?(r(),void 0!==e.reload?e.reload===!0?window.location.href=window.location.href:window.location.href=e.reload:o.loaderHide()):o.loaderHide(),void 0!==e.alerts){for(var t in e.alerts){var n=e.alerts[t];s.find(".alerts").append($("<div>").addClass("alert alert-"+n.type).html(n.text))}o.loaderHide()}if(void 0!==e.run){var a=new Function("form",e.run);a.call(null,o),o.loaderHide()}},1)},error:function(){o.loaderHide(),s.find(".alerts").append($("<div>").addClass("alert alert-danger").html(o.errorText))}})}}else s.find(".alerts div").remove(),s.find(".alerts").append($("<div>").addClass("alert alert-danger").html(o.invalidText));return!1};o.loaderShow=function(){s.find(".loader").show()},o.loaderHide=function(){s.find(".loader").hide()},o.submit=function(){f()},o.getValues=function(){return n()};var v=function(){s.addClass("loader-container").append('<div class="loader"></div>'),s.attr("data-hex-block",""),s.on("submit",f),s.on("reset",a),0===s.find(".loader").size()&&s.append('<div class="loader"></div>'),void 0!==s.data("datatype")&&(u=s.data("datatype")),o.root=new e.Block(s)};return v(),o}var n={};return e.form=function(e){if(void 0!==e)return void 0===n[e]&&(n[e]=new t(e)),n[e];var r=$("form.hex-form");return r.each(function(){var e=$(this).attr("id");if(void 0===e)throw new Error("Form dont have id attr");void 0===n[e]&&(n[e]=new t(e))}),n},e.remove=function(e){void 0!==n[e]&&(n[e]=void 0)},$(document).ready(function(){e.form()}),e}(hex);