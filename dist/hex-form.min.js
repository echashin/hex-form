!function(e){"use strict";var t={widgets:{},validators:{},utils:{}};t.utils.toCamel=function(e){return e.replace(/[-_]([a-z])/g,function(e){return e[1].toUpperCase()})},t.utils.isEmpty=function(e){return!!(null===e||e===!1||void 0===e||""===e||$.isArray(e)&&0===e.length)},t.utils.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,a,r,i,o;return r=2147483648&e,i=2147483648&t,n=1073741824&e,a=1073741824&t,o=(1073741823&e)+(1073741823&t),n&a?2147483648^o^r^i:n|a?1073741824&o?3221225472^o^r^i:1073741824^o^r^i:o^r^i}function a(e,t,n){return e&t|~e&n}function r(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function s(e,r,i,o,s,u,d){return e=n(e,n(n(a(r,i,o),s),d)),n(t(e,u),r)}function u(e,a,i,o,s,u,d){return e=n(e,n(n(r(a,i,o),s),d)),n(t(e,u),a)}function d(e,a,r,o,s,u,d){return e=n(e,n(n(i(a,r,o),s),d)),n(t(e,u),a)}function l(e,a,r,i,s,u,d){return e=n(e,n(n(o(a,r,i),s),d)),n(t(e,u),a)}function f(e){for(var t,n=e.length,a=n+8,r=(a-a%64)/64,i=16*(r+1),o=Array(i-1),s=0,u=0;n>u;)t=(u-u%4)/4,s=u%4*8,o[t]=o[t]|e.charCodeAt(u)<<s,u++;return t=(u-u%4)/4,s=u%4*8,o[t]=o[t]|128<<s,o[i-2]=n<<3,o[i-1]=n>>>29,o}function c(e){var t,n,a="",r="";for(n=0;3>=n;n++)t=e>>>8*n&255,r="0"+t.toString(16),a+=r.substr(r.length-2,2);return a}function v(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);128>a?t+=String.fromCharCode(a):a>127&&2048>a?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}var p,h,m,g,x,y,b,w,$,k=[],C=7,E=12,D=17,V=22,S=5,I=9,z=14,O=20,P=4,T=11,N=16,M=23,j=6,R=10,L=15,F=21;for(e=v(e),k=f(e),y=1732584193,b=4023233417,w=2562383102,$=271733878,p=0;p<k.length;p+=16)h=y,m=b,g=w,x=$,y=s(y,b,w,$,k[p+0],C,3614090360),$=s($,y,b,w,k[p+1],E,3905402710),w=s(w,$,y,b,k[p+2],D,606105819),b=s(b,w,$,y,k[p+3],V,3250441966),y=s(y,b,w,$,k[p+4],C,4118548399),$=s($,y,b,w,k[p+5],E,1200080426),w=s(w,$,y,b,k[p+6],D,2821735955),b=s(b,w,$,y,k[p+7],V,4249261313),y=s(y,b,w,$,k[p+8],C,1770035416),$=s($,y,b,w,k[p+9],E,2336552879),w=s(w,$,y,b,k[p+10],D,4294925233),b=s(b,w,$,y,k[p+11],V,2304563134),y=s(y,b,w,$,k[p+12],C,1804603682),$=s($,y,b,w,k[p+13],E,4254626195),w=s(w,$,y,b,k[p+14],D,2792965006),b=s(b,w,$,y,k[p+15],V,1236535329),y=u(y,b,w,$,k[p+1],S,4129170786),$=u($,y,b,w,k[p+6],I,3225465664),w=u(w,$,y,b,k[p+11],z,643717713),b=u(b,w,$,y,k[p+0],O,3921069994),y=u(y,b,w,$,k[p+5],S,3593408605),$=u($,y,b,w,k[p+10],I,38016083),w=u(w,$,y,b,k[p+15],z,3634488961),b=u(b,w,$,y,k[p+4],O,3889429448),y=u(y,b,w,$,k[p+9],S,568446438),$=u($,y,b,w,k[p+14],I,3275163606),w=u(w,$,y,b,k[p+3],z,4107603335),b=u(b,w,$,y,k[p+8],O,1163531501),y=u(y,b,w,$,k[p+13],S,2850285829),$=u($,y,b,w,k[p+2],I,4243563512),w=u(w,$,y,b,k[p+7],z,1735328473),b=u(b,w,$,y,k[p+12],O,2368359562),y=d(y,b,w,$,k[p+5],P,4294588738),$=d($,y,b,w,k[p+8],T,2272392833),w=d(w,$,y,b,k[p+11],N,1839030562),b=d(b,w,$,y,k[p+14],M,4259657740),y=d(y,b,w,$,k[p+1],P,2763975236),$=d($,y,b,w,k[p+4],T,1272893353),w=d(w,$,y,b,k[p+7],N,4139469664),b=d(b,w,$,y,k[p+10],M,3200236656),y=d(y,b,w,$,k[p+13],P,681279174),$=d($,y,b,w,k[p+0],T,3936430074),w=d(w,$,y,b,k[p+3],N,3572445317),b=d(b,w,$,y,k[p+6],M,76029189),y=d(y,b,w,$,k[p+9],P,3654602809),$=d($,y,b,w,k[p+12],T,3873151461),w=d(w,$,y,b,k[p+15],N,530742520),b=d(b,w,$,y,k[p+2],M,3299628645),y=l(y,b,w,$,k[p+0],j,4096336452),$=l($,y,b,w,k[p+7],R,1126891415),w=l(w,$,y,b,k[p+14],L,2878612391),b=l(b,w,$,y,k[p+5],F,4237533241),y=l(y,b,w,$,k[p+12],j,1700485571),$=l($,y,b,w,k[p+3],R,2399980690),w=l(w,$,y,b,k[p+10],L,4293915773),b=l(b,w,$,y,k[p+1],F,2240044497),y=l(y,b,w,$,k[p+8],j,1873313359),$=l($,y,b,w,k[p+15],R,4264355552),w=l(w,$,y,b,k[p+6],L,2734768916),b=l(b,w,$,y,k[p+13],F,1309151649),y=l(y,b,w,$,k[p+4],j,4149444226),$=l($,y,b,w,k[p+11],R,3174756917),w=l(w,$,y,b,k[p+2],L,718787259),b=l(b,w,$,y,k[p+9],F,3951481745),y=n(y,h),b=n(b,m),w=n(w,g),$=n($,x);var A=c(y)+c(b)+c(w)+c($);return A.toLowerCase()},e.hex=t}(window);var hex=function(e){"use strict";function t(t){function n(e){function t(){var t=r.getValue(),n=!1;null===t||t===!1||void 0===t||""===t||$.isArray(t)&&0===t.length?n=!1:("string"==typeof t&&t===a&&(n=!0),"object"==typeof t&&t.indexOf(a)>=0&&(n=!0)),n?(e.show(),e.find('input[type!="submit"],select,textarea').trigger("enable")):(e.hide(),e.find('input[type!="submit"],select,textarea').trigger("disable"))}if(e.parents('[data-hex-multy-item="$"]').size()>0)return!1;var n=e.data("hexDisabled"),a=n.value,r=i.controls[n.control];if(void 0===r)throw new Error('Control "'+n.control+'" not found');r.addEvent("change",t),r.trigger("change")}function a(e){return e.replace("-","").toUpperCase()}function r(e){function t(e,t){i.hexBind(e,{"@index":t})}function a(){if(u===!1){var t=e.find("[data-hex-multy-item]");t.size()<=1?e.find("[data-hex-multy-remove]").attr("disabled","disabled"):e.find("[data-hex-multy-remove]").removeAttr("disabled")}}var r,o,s=e.data("hex-multy"),u=!1;void 0!==s.allow_empty&&s.allow_empty===!0&&(u=!0),e.find("[data-hex-multy-tabs]").size()>0&&(r=e.find("[data-hex-multy-tabs]"),o=r.find('[data-hex-multy-tab="$"]').clone(!1),r.find('[data-hex-multy-tab="$"]').remove());var f=e.find('[data-hex-multy-item="$"]'),c=f.clone(!1);f.remove(),e.on("click","[data-hex-multy-add]",function(){var i=$(this).closest("[data-hex-multy]").find("[data-hex-multy-item]"),s=i.size(),u=c.clone(!1);if(u.find("[data-hex-multy-hide]").remove(),u.find("[data-hex-multy-attr]").each(function(){var e=$(this),t=e.data("hex-multy-attr");if(void 0!==t.add&&$.each(t.add,function(t,n){for(var a in n)e.attr(a,n[a])}),void 0!==t.remove)for(var n in t.remove)e.removeAttr(t.remove[n])}),t(u,s),u.appendTo(e.find("[data-hex-multy-items]")),void 0!==r){var d=o.clone(!1);t(d,s),e.find("[data-hex-multy-tab]:last").size()>0?d.insertAfter(e.find("[data-hex-multy-tab]:last")):r.prepend(d)}l(u),void 0!==r&&$('a[href="#'+u.attr("id")+'"]').trigger("click"),u.find("[data-hex-disabled]").size()>0&&u.find("[data-hex-disabled]").each(function(){n($(this))}),a()}),e.on("click","[data-hex-multy-remove]",function(){var n=$(this).closest("[data-hex-multy-item]"),i=n.data("hexMultyItem"),o=e.find("[data-hex-multy-item]");d(n),n.fadeOut(500,function(){n.remove(),o.each(function(){$(this).data("hexMultyItem")>i&&t($(this),$(this).data("hexMultyItem")-1)}),void 0!==r&&(r.find('[data-hex-multy-tab="'+i+'"]').remove(),r.find("[data-hex-multy-tab]").each(function(){$(this).data("hexMultyTab")>i&&t($(this),$(this).data("hexMultyTab")-1)}),r.find("[data-hex-multy-tab="+i+"]").size()>0?r.find("[data-hex-multy-tab="+i+"]").find('a[role="tab"]').trigger("click"):r.find("[data-hex-multy-tab]:nth-child("+i+")").size()>0&&r.find("[data-hex-multy-tab]:nth-child("+i+")").find('a[role="tab"]').trigger("click")),a()})}),a()}var i=this;i.controls={},i.errorText="Не удалось сохранить форму, попробуйте обновить страницу",i.invalidText="Форма содержит ошибки";var o=$("#"+t),s={},u=function(e){this.type=e,this.stoped=!1,this.stop=function(){this.stoped=!0}};i.on=function(e,t){void 0===s[e]&&(s[e]=[]),s[e].indexOf(t)<0&&s[e].push(t)},i.off=function(e,t){void 0!==s[e]&&s[e].splice(s[e].indexOf(t),1)},i.fire=function(e,t){if(void 0!==s[e]){var n=new u(e);for(var a in s[e]){var r=s[e][a];r(t,n)}return!n.stoped}return!0},i.getHandlers=function(){return s};var d=function(e){$.each(e.find('input[type!="submit"],select,textarea'),function(e,t){var n=$(t),a=n.attr("name");void 0!==i.controls[a]&&delete i.controls[a]})},l=function(t){$.each(t.find('input[type!="submit"],select,textarea'),function(t,n){var a=$(n);if(0===a.parents('[data-hex-multy-item="$"]').size()){var r=a.attr("name"),o=a.prop("tagName").toLowerCase();switch(o){case"select":case"textarea":i.controls[r]=new e.Control({type:o,inputs:[a],form:i,name:r});break;case"input":var s=a.attr("type").toLowerCase();switch(s){default:i.controls[r]=new e.Control({type:s,inputs:[a],form:i,name:r});break;case"checkbox":var u=new e.Control({type:"checkbox",inputs:[a],form:i,name:r});void 0!==a.attr("value")&&(u.trueValue=a.attr("value")),void 0!==a.attr("data-hex-true-value")&&(u.trueValue=a.attr("data-hex-true-value")),void 0!==a.attr("data-hex-false-value")&&(u.falseValue=a.attr("data-hex-false-value")),i.controls[r]=u;break;case"radio":void 0===i.controls[r]?i.controls[r]=new e.Control({type:"radio",inputs:[a],form:i,name:r}):i.controls[r].addInput(a)}}}})},f=function(){var e={};for(var t in i.controls)if(i.controls.hasOwnProperty(t)&&i.controls[t].disabled===!1){var n=i.controls[t].name,a=i.controls[t].getValue();null===a||$.isArray(a)&&0===a.length?a="":e[n]=a}return e},c=function(e){var t=i.fire("beforeReset",{values:i.getValues()});t?window.setTimeout(function(){for(var e in i.controls)i.controls.hasOwnProperty(e)&&(i.controls[e].trigger("change"),i.controls[e].setValid())},1):e.preventDefault(),i.fire("afterReset",{})},v=function(){o.find(".has-error").removeClass("has-error"),o.find(".alerts div").remove()},p=function(e){e.preventDefault(),e.stopPropagation();var t=!0;for(var n in i.controls)i.controls.hasOwnProperty(n)&&i.controls[n].validate(void 0)===!1&&(t=!1);if(t===!0){v();var a=f(),r=i.fire("beforeSubmit",{values:a});if(r){i.loaderShow();var s=o.attr("action"),u=o.find("button[type=submit]:focus");u.size()>0&&void 0!==u.attr("data-action")&&(s=u.attr("data-action"));var d="POST";void 0!==o.attr("method")&&(d=o.attr("method"));var l=new FormData;$.each(a,function(e,t){if($.isArray(t)||$.isPlainObject(t))for(var n in t)null!==t[n]&&t[n]!==!1&&void 0!==t[n]&&l.append(e,t[n]);else l.append(e,t)}),$.ajax({url:s,data:l,type:d,dataType:"json",processData:!1,contentType:!1,success:function(e){var t=i.fire("afterSubmit",e);t&&window.setTimeout(function(){if(e.success===!0?(v(),void 0!==e.reload?e.reload===!0?window.location.href=window.location.href:window.location.href=e.reload:i.loaderHide()):i.loaderHide(),void 0!==e.alerts){for(var t in e.alerts){var n=e.alerts[t];o.find(".alerts").append($("<div>").addClass("alert alert-"+n.type).html(n.text))}i.loaderHide()}},1)},error:function(){i.loaderHide(),o.find(".alerts").append($("<div>").addClass("alert alert-danger").html(i.errorText))}})}}else o.find(".alerts div").remove(),o.find(".alerts").append($("<div>").addClass("alert alert-danger").html(i.invalidText));return!1};i.loaderShow=function(){o.find(".loader").show()},i.loaderHide=function(){o.find(".loader").hide()},i.submit=function(){p()},i.getValues=function(){return f()},i.hexBind=function(e,t){function n(e){var t=e.split(""),n=[],a=[],r=0,i=!0;n[r]="";for(var o=0;o<t.length;o++)isNaN(parseInt(t[o]))&&"."!==t[o]&&!i?(a[r]=t[o],r++,n[r]="",i=!0):(n[r]+=t[o],i=!1);e=parseFloat(n[0]);for(var s=0;s<a.length;s++){var u=parseFloat(n[s+1]);switch(a[s]){case"+":e+=u;break;case"-":e-=u;break;case"*":e*=u;break;case"/":e/=u}}return e}function r(e){if("object"==typeof e)for(var a in e)e[a]=r(e[a]);else{for(var i in t)e=e.replace(new RegExp(i,"g"),t[i]);/\%/.test(e)&&(e=e.replace(/\%(.*?)\%/g,function(e){return n(e.replace(/\%/g,""))}))}return e}var o=[];o.push(e),e.find("[data-hex-bind]").each(function(){o.push($(this))});for(var s in o){var u=o[s].data("hexBind");for(var d in u){var l=r(u[d]);if("html"!==d){if(/^data/.test(d)){var f=d.replace(/^data-/,"");f=f.replace(/(\-[a-z])/g,a),o[s].data(f,l)}if("name"===d){var c=o[s].attr("name");if(void 0!==c&&void 0!==i.controls[c]){var v=i.controls[c];v.name=l,i.controls[l]=v,delete i.controls[c]}}"object"==typeof l?o[s].attr(d,JSON.stringify(l)):o[s].attr(d,l)}else o[s].html(l)}}};var h=function(){o.addClass("loader-container").append('<div class="loader"></div>'),$(document).on("submit","#"+t,p),$(document).on("reset","#"+t,c),0===o.find(".loader").size()&&o.append('<div class="loader"></div>'),l(o),o.find("[data-hex-multy]").size()>0&&o.find("[data-hex-multy]").each(function(){r($(this))}),o.find("[data-hex-disabled]").size()>0&&o.find("[data-hex-disabled]").each(function(){n($(this))})};return h(),i}var n={};return e.form=function(e){if(void 0!==e)return void 0===n[e]&&(n[e]=new t(e)),n[e];var a=$("form.hex-form");return a.each(function(){var e=$(this).attr("id");if(void 0===e)throw new Error("Form dont have id attr");n[e]=new t(e)}),n},$(document).ready(function(){e.form()}),e}(hex),hex=function(e){"use strict";return e.Control=function(t){function n(e){return function(t,n){return"number"==typeof t[e]?t[e]-n[e]:t[e]<n[e]?-1:t[e]>n[e]?1:0}}var a=this;a.type=void 0,a.valid=!0,a.name=void 0;var r=[];a.form=t.form;var i,o;a.formGroup=void 0,a.panels=[],a.tabs=[];var s,u=[],d={},l={};a.disabled=!1,a.readonly=!1,a.setValid=function(){void 0!==a.formGroup&&a.formGroup.removeClass("has-error"),void 0!==i&&i.find("span").removeClass("active")},a.getWidgets=function(){return d},a.getInputs=function(){return r},a.enable=function(){for(var e in r)r[e].prop("disabled",!1);a.disabled=!1},a.disable=function(){for(var e in r)r[e].prop("disabled",!0);a.disabled=!0,a.valid=!0,a.validate()},a.addReadonly=function(){for(var e in r)r[e].prop("readonly",!0);a.readonly=!0},a.removeReadonly=function(){for(var e in r)r[e].prop("readonly",!1);a.readonly=!1};var f=function(){var e=0;if(void 0!==i&&i.find("span").removeClass("active"),!a.disabled)for(var t in u)if(u.hasOwnProperty(t)){var n=u[t],r=a.getValue(),o=n.isValid(r);if(o===!1||"false"===o){e++,void 0!==i&&i.find("span.error-"+n.getClassName()).addClass("active");break}}if(e>0?(a.valid=!1,void 0!==a.formGroup&&a.formGroup.addClass("has-error")):(void 0!==a.formGroup&&a.formGroup.removeClass("has-error"),a.valid=!0),a.panels.length>0){var s=!0;if(a.valid===!0){for(var d in a.form.controls)if(a.form.controls.hasOwnProperty(d)){var l=a.form.controls[d];if(l.valid===!1)for(var f in l.panels){var c=l.panels[f];for(var v in a.panels)if(c===a.panels[v]){s=!1;break}}}}else s=!1;s===!0?$.each(a.tabs,function(e,t){t.removeClass("has-error")}):$.each(a.tabs,function(e,t){t.addClass("has-error")})}return a.valid};a.validate=function(e){return void 0===e?f():"blur"===e.type?f():(void 0!==o&&clearTimeout(o),void(o=setTimeout(f,500)))},a.trigger=function(e){for(var t=0;t<r.length;t++)r[t].trigger(e)},a.addEvent=function(e,t){for(var n=0;n<r.length;n++)r[n].bind(e,t)};var c=function(e){for(var t={},n=e[0].attributes,a=n.length,r=0;a>r;r++)t[n[r].name.toLowerCase()]=n[r].value;return t},v=function(t,n){var r={};if(t=e.utils.toCamel(t),void 0!==n&&""!==n&&$.extend(r,jQuery.parseJSON(n)),void 0!==e.validators[t]){var i=new e.validators[t](a,r),o=i.getEvents();for(var s in o)o.hasOwnProperty(s)&&(l[o[s]]=!0);u.push(i)}else console.warn('Validator "'+t+'" not loaded!')},p=function(t,n){t=e.utils.toCamel(t);var r={};void 0!==n&&""!==n&&$.extend(r,jQuery.parseJSON(n)),void 0!==e.widgets[t]?d[t]=new e.widgets[t](a,r):console.warn('Widget "'+t+'" not loaded!')};a.addInput=function(e){r.push(e);var t=c(e);for(var i in t)if(t.hasOwnProperty(i)){var o=i.match(/^data-hex-widget-(.*)$/i);if(null!==o&&void 0!==o[1]&&p(o[1],t[i]),"required"===i)v("required",t[i]);else{var s=i.match(/^data-hex-validator-(.*)$/i);null!==s&&void 0!==s[1]&&v(s[1],t[i])}}for(var d in l)l.hasOwnProperty(d)&&e.bind(d,a.validate);u.sort(n("weight")),e.prop("disabled")&&a.disable(),e.prop("readonly")&&a.addReadonly(),e.bind("disable",function(){a.disable()}),e.bind("enable",function(){a.enable()})},a.getValue=function(){switch(a.type){case"text":default:if(void 0!==d.date){var e=r[0].data("daterangepicker");if(void 0===e)return r[0].val();if(""===r[0].val())return!1;var t="",n="YYYY-MM-DD";if(e.timePicker===!0&&(n+=" HH:mm"),t+=e.startDate.format(n),e.singleDatePicker===!1){var i=e.endDate.format(n);t+=" - "+i}return t}return void 0!==d.fileupload||void 0!==d.filesimple?s:r[0].val();case"radio":for(var o in r)if(r.hasOwnProperty(o)&&r[o].is(":checked")===!0)return r[o].val();return!1;case"checkbox":return r[0].is(":checked")===!0?a.trueValue:a.falseValue}},a.setValue=function(e){s=e};var h=function(e){if(void 0!==e.type&&(a.type=e.type,"checkbox"===e.type&&(a.trueValue=!0,a.falseValue=!1)),void 0!==e.form&&(a.form=e.form),a.name=e.name,void 0!==e.inputs)for(var t in e.inputs)e.inputs.hasOwnProperty(t)&&a.addInput(e.inputs[t]);a.formGroup=r[0].closest("div.form-group"),0===a.formGroup.size()?a.formGroup=void 0:(i=a.formGroup.find(".errors"),0===i.size()&&(i=void 0)),r[0].parents('[role="tabpanel"]').size()>0&&r[0].parents('[role="tabpanel"]').each(function(){var e=$(this),t=e.attr("id");a.panels.push(t);var n=$('.nav a[href="#'+t+'"]');n.size()>0&&a.tabs.push(n)}),a.setValid()};h(t)},e}(hex),hex=function(e){"use strict";return e.widgets.passwordShow=function(e){function t(){a=e.getInputs()[0],n=a.closest(".form-group").find("button.password-show"),n.bind("click",function(e){return e.preventDefault(),"password"===r?(a.attr("type","text"),n.addClass("active"),r="text"):(a.attr("type","password"),n.removeClass("active"),r="password"),a.focus(),!1})}var n,a,r="password";t()},e}(hex),hex=function(e){"use strict";return e.widgets.passwordStrength=function(e){function t(e){return o=e.length>8?1:0,s=e.match(f)?1:0,u=e.match(c)?1:0,d=e.match(v)?1:0,l=e.match(p)?1:0,o+s+u+d+l}function n(){a=e.getInputs()[0],r=a.closest(".form-group").find(".password-strength div"),a.bind("keyup change",function(){var e=a.val();r.attr("class","s-"+t(e))})}var a,r,i=this,o=0,s=0,u=0,d=0,l=0,f=new RegExp("[A-ZА-Я]"),c=new RegExp("[a-zа-я]"),v=new RegExp("[0-9]"),p=new RegExp("([!,%,&,@,#,$,^,*,?,_,~])");i.weight=0,n()},e}(hex),hex=function(e){"use strict";var t=$("html").attr("lang");if(e.utils.isEmpty(t))throw new Error("Doesn`t set lang attr in html tag");return moment.locale(t.toLowerCase()),e.widgets.date=function(t,n){function a(){r=t.getInputs()[0];var a=moment.localeData(),d=a.longDateFormat("L");void 0!==n.timePicker&&n.timePicker===!0&&(d+=" "+a.longDateFormat("LT"));var l={autoUpdateInput:!1,linkedCalendars:!1,singleDatePicker:!0,locale:{format:d,separator:" - ",applyLabel:"Готово",cancelLabel:"Отмена",fromLabel:"От",toLabel:"До",customRangeLabel:"Custom",daysOfWeek:moment.weekdaysShort(),monthNames:moment.months(),firstDay:a.firstDayOfWeek()}};void 0!==n.parentMin&&(s=$(n.parentMin).val(),e.utils.isEmpty(s)||(l.minDate=s),i=n.parentMin,delete n.parentMin),void 0!==n.parentMax&&(u=$(n.parentMax).val(),e.utils.isEmpty(u)||(l.maxDate=u),o=n.parentMax,delete n.parentMax),$.extend(l,n);var f=l.locale.format.replace(/[H]/g,"9").replace(/[m]/g,"9").replace(/[D]+/g,"d").replace(/[M]+/g,"m").replace(/[Y]+/g,"y");l.singleDatePicker===!1&&(f+=l.locale.separator+f),r.inputmask(f);var c=function(){var e=r.data("daterangepicker"),t=e.startDate.format(l.locale.format);l.singleDatePicker===!1&&(t+=l.locale.separator+e.endDate.format(l.locale.format)),r.val(t).trigger("change")};r.daterangepicker(l),r.on("apply.daterangepicker",function(){c()}),i!==!1&&$(i).on("change",function(){s=$(i).val(),e.utils.isEmpty(s)?(t.disable(),r.val("").trigger("change")):(l.minDate=s,r.daterangepicker(l),r.on("apply.daterangepicker",function(){c()}),t.enable(),e.utils.isEmpty(r.val())&&(r.data("daterangepicker").setStartDate(s),r.data("daterangepicker").setEndDate(s)),c(),o!==!1&&$(o).trigger("change"))}),o!==!1&&$(o).on("change",function(){u=$(o).val(),e.utils.isEmpty(u)?(t.disable(),r.val("").trigger("change")):(l.maxDate=u,r.daterangepicker(l),r.on("apply.daterangepicker",function(){c()}),t.enable(),e.utils.isEmpty(r.val())&&(e.utils.isEmpty(s)?(r.data("daterangepicker").setStartDate(u),r.data("daterangepicker").setEndDate(u)):(r.data("daterangepicker").setStartDate(s),r.data("daterangepicker").setEndDate(s))),c())}),o!==!1&&$(o).trigger("change"),i!==!1&&$(i).trigger("change")}var r,i=!1,o=!1,s=!1,u=!1;a()},e}(hex),hex=function(e){"use strict";return e.widgets.mask=function(e,t){function n(){if(a=e.getInputs()[0],void 0===t.mask)throw new Error(a.attr("name")+" doesn`t set mask param");r=t.mask,a.inputmask(r)}var a,r;n()},e}(hex),hex=function(e){"use strict";return e.widgets.phone=function(e,t){function n(){a=e.getInputs()[0],void 0!==t.mask&&(r=t.mask),a.inputmask(r)}var a,r="+7(999)999-99-99";n()},e}(hex),hex=function(e){"use strict";return e.widgets.select2=function(t,n){function a(){r=t.getInputs()[0];var a=n.placeholder||"",o={theme:"bootstrap",allowClear:!0,placeholder:a};if(void 0!==n.url){i="ajax";var s=r.find("option[selected]");if(n.ajax={url:n.url,method:"POST",dataType:"json",delay:250,data:function(e){return{search:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.rows,pagination:{more:t.page*e.limit<e.total}}},cache:!1},delete n.url,void 0!==n.parent){var u=n.parent.selector,d=n.parent.param||"parent_id";e.utils.isEmpty($(u).val())&&(t.disable(),r.val("").trigger("change")),$(u).on("change",function(){e.utils.isEmpty($(this).val())?(t.disable(),r.val("").trigger("change")):t.enable()}),delete n.parent;var l=function(){return $(u).val()};n.ajax.data=function(e){var t={search:e.term,page:e.page};return t[d]=l,t}}}$.extend(o,n),r.select2(o),"ajax"===i&&(s.each(function(){r.append($(this))}),r.trigger("change"))}var r,i="local";a()},e}(hex),hex=function(e){"use strict";return e.widgets.filesimple=function(e){function t(){function t(t){a=t.target.files[0],e.setValue(a)}n=e.getInputs()[0],n.bind("change",t)}var n,a;t()},e}(hex),hex=function(e){"use strict";return e.widgets.fileupload=function(t,n){function a(){var e=[];for(var n in C)C[n].valid&&void 0!==C[n].id&&e.push(parseInt(C[n].id));t.setValue(e)}function r(){var e=!1;for(var t in C)if(C[t].loading===!0){e=!0;break}E.loading=e}function i(e,t){var n=y.clone();void 0!==t&&n.addClass(t),n.find("i").attr("title",e.name).html(e.name);var a=n.find(".upload-preview");return void 0!==e.url?(a.attr("href",e.url),void 0!==e.thumb&&a.html('<img src="'+e.thumb+'"/>')):a.hide(),n.get(0).outerHTML}function o(){var e="";for(var t in C)e+=i(C[t]);g.html(e),g.find("thumb").each(function(e){C[e].setElement($(this))})}function s(e){if(k){for(var t in C)C[t].remove(!0);g.find("thumb").remove(),a()}var n=new D({uid:e.uniqueIdentifier,name:e.name,loading:!0}),o=i(n,"upfile-new loading");g.append(o),n.setElement(g.find("thumb:last-child")),C.push(n),n.progress(5),r()}function u(e){for(var t=C.length,n=0;t>=n;n++)if(C[n].uid===e)return C[n];return!1}function d(e,t){var n=u(e.uniqueIdentifier);n!==!1&&n.error(t),r()}function l(e,t){var n=u(e.uniqueIdentifier);n!==!1&&n.complete(t),r()}function f(e){var t=Math.floor(e.size/100),n=Math.floor(e.sizeUploaded()/t),a=u(e.uniqueIdentifier);a!==!1&&a.progress(n)}function c(){var e=[];g.find("thumb").each(function(){var t=$(this).attr("id");for(var n in C)C[n].rid===t&&e.push(C[n])}),C=e,a()}function v(){if(p=t.getInputs()[0],b="u_"+p.attr("id")+"_",void 0!==n.types){x=[];var r=/$[\.]/;for(var i in n.types){var u=n.types[i];r.test(u)||(u="."+u),x.push(u)}}if(n.single===!0&&(k=!0),void 0!==n.limit&&(w=parseInt(n.limit),isNaN(w)&&(w=1),0===w&&(w=0),delete n.limit),void 0===n.url)throw new Error("doesnt set url paremetr on "+t.name);h=n.url;var v={target:h,singleFile:k,simultaneousUploads:5,chunkSize:262144,maxChunkRetries:void 0,allowDuplicateUploads:!1,prioritizeFirstAndLastChunk:!0,generateUniqueIdentifier:function(t){var n="file_";return n+=t.size,n+=t.name,n+=b,n=e.utils.md5(n)}};if(m=new Flow(v),y=p.closest(".form-group").find(".upload-dropzone *").first().clone(!1),p.closest(".form-group").find(".upload-dropzone *").remove(),g=p.closest(".form-group").find(".upload-dropzone"),g.on("dragenter",function(){$(this).addClass("drag")}),g.on("dragover",function(){$(this).addClass("drag")}),g.on("dragend",function(){$(this).removeClass("drag")}),g.on("drop",function(){$(this).removeClass("drag")}),g.on("mouseout",function(){$(this).removeClass("drag")}),g.on("dragleave",function(){$(this).removeClass("drag")}),1!==w){var E=dragula([g[0]],{mirrorContainer:g.closest(".form-group")[0],direction:"horizontal",copy:!1,copySortSource:!1});E.on("drop",function(){c()})}var V=p.data("hexFiles");if(void 0!==V){for(var S in V){var I=new D(V[S]);C.push(I)}o()}if(a(),m.support){var z={};void 0!==x&&(z.accept=x.join(",")),m.assignBrowse(p.closest(".form-group").find("[data-upload]")[0],!1,k,z),m.assignDrop(g[0]),m.on("fileAdded",function(e){var t=!0;return void 0!==x&&x.indexOf("."+e.getType())<0&&(t=!1),t?s(e):(s(e),d(e,'"'+e.name+'" - неверный тип файла. Разрешены файлы типа: '+x.join(", "))),t}),m.on("fileSuccess",function(e,t){t=$.parseJSON(t),l(e,t)}),m.on("fileError",function(e,t){d(e,t)}),m.on("filesSubmitted",function(){m.upload()}),m.on("fileProgress",function(e){f(e)})}}var p,h,m,g,x,y,b,w=0,k=!1,C=[],E=this;E.loading=!1;var D=function(e){function t(){var e=b;void 0!==i.id&&(e+="_"+i.id),void 0!==i.uid&&(e+="_"+i.uid),i.rid=e,o.attr("id",e)}function n(e){if(void 0!==e)for(var t in e)i.hasOwnProperty(t)&&(i[t]=e[t]);void 0===i.id&&(i.valid=!1)}var i=this;i.id=void 0,i.uid=void 0,i.thumb=void 0,i.url=void 0,i.name=void 0,i.valid=!0,i.rid=0,i.loading=!1;var o;i.setElement=function(e){o=e,o.on("click","remove",function(e){return e.preventDefault(),i.remove(),!1}),t()},i.progress=function(e){i.valid=!1,o.find("p").show().css("width",e+"%")},i.complete=function(e){i.valid=!0,i.loading=!1,n(e),o.removeClass("loading");var t=o.find(".upload-preview");t.attr("href",i.url),t.show(),void 0!==i.thumb&&t.html('<img src="'+i.thumb+'"/>'),o.find("p").hide(),i.loading=!1,a()},i.remove=function(e){i.valid=!1,i.loading=!1;var t=C.indexOf(i);t>=0&&(E.uploaderRemoveFile(i.uid),C.splice(t,1)),e===!0?o.remove():o.fadeOut(function(){o.remove()}),r(),a()},i.error=function(e){i.valid=!1,i.loading=!1,o.find("p").hide(),o.removeClass("loading"),e="! Ошибка:<br/>"+e,o.find(".frame").html('<div class="upload-error">'+e+"</div>"),o.addClass("upfile-error"),o.removeClass("upfile-new");var t=C.indexOf(i);t>=0&&(E.uploaderRemoveFile(i.uid),C.splice(t,1))},n(e)};E.uploaderRemoveFile=function(e){var t=m.files;for(var n in t)if(t[n].uniqueIdentifier===e){m.removeFile(t[n]);break}},v()},e}(hex),hex=function(e){"use strict";return e.validators.required=function(t,n){function a(){void 0!==n.events&&r.setEvents(n.events)}var r=this,i=["blur","change"];r.weight=0;var o="required";r.getClassName=function(){return o},r.setEvents=function(e){i=e},r.getEvents=function(){return i},r.isValid=function(t){return e.utils.isEmpty(t)?!1:!0},a()},e}(hex),hex=function(e){"use strict";return e.validators.email=function(t,n){function a(){void 0!==n.events&&r.setEvents(n.events)}var r=this,i="email";r.getClassName=function(){return i};var o=["change","keyup"],s=/^\S+[@]\S+\.\S{2,10}$/i;r.weight=1,r.setEvents=function(e){o=e},r.getEvents=function(){return o},r.isValid=function(t){return e.utils.isEmpty(t)?!0:s.test(t)},a()},e}(hex),hex=function(e){"use strict";return e.validators.unique=function(e,t){function n(){void 0!==t.events&&a.setEvents(t.events),void 0!==t.url&&(i=t.url)}var a=this,r="unique";a.getClassName=function(){return r};var i,o=!1,s=!1,u=["change","keyup","blur"];a.weight=5,a.setEvents=function(e){u=e},a.getEvents=function(){return u},a.isValid=function(e){if(s!==!1&&s.abort(),o!==e){s=$.ajax({url:i,data:{value:e},method:"POST",async:!1});var t=s.responseText;return o="true"===t?e:!1,t}return!0},n()},e}(hex),hex=function(e){"use strict";return e.validators.stringLength=function(e,t){function n(){void 0!==t.min&&(a=t.min),void 0!==t.max&&(r=t.max),void 0!==t.events&&i.setEvents(t.events)}var a,r,i=this,o="string-length";i.getClassName=function(){return o};var s=["change","keyup","blur"];i.weight=3,i.setEvents=function(e){s=e},i.getEvents=function(){return s},i.isValid=function(e){var t=e.length;return void 0!==a&&a>t?(o="string-length-min",!1):void 0!==r&&t>r?(o="string-length-max",!1):!0},n()},e}(hex),hex=function(e){"use strict";return e.validators.passwordConfirm=e.validators.confirm=function(e,t){function n(){void 0!==t.events&&a.setEvents(t.events),void 0!==t.password&&(o=$(t.password))}var a=this,r="password-confirm";a.getClassName=function(){return r};var i=["change","keyup","blur"];a.weight=4;var o;a.setEvents=function(e){i=e},a.getEvents=function(){return i},a.isValid=function(e){return o.val()===e},n()},e}(hex),hex=function(e){"use strict";return e.validators.mask=function(t,n){function a(){void 0!==n.events&&i.setEvents(n.events),r=t.getInputs()[0]}var r,i=this,o="mask",s=["blur"];i.getClassName=function(){return o},i.weight=4,i.setEvents=function(e){s=e},i.getEvents=function(){return s},i.isValid=function(t){if(e.utils.isEmpty(t))return!0;var n=r.inputmask("option","mask");return Inputmask.isValid(r.val(),{alias:n})},a()},e}(hex),hex=function(e){"use strict";return e.validators.phone=function(t,n){function a(){void 0!==n.events&&i.setEvents(n.events),r=t.getInputs()[0]}var r,i=this,o="phone",s=["blur"];i.getClassName=function(){return o},i.weight=4,i.setEvents=function(e){s=e},i.getEvents=function(){return s},i.isValid=function(t){if(e.utils.isEmpty(t))return!0;var n=r.inputmask("option","mask");return Inputmask.isValid(r.val(),{alias:n})},a()},e}(hex),hex=function(e){"use strict";return e.validators.date=function(t,n){function a(){void 0!==n.events&&r.setEvents(n.events),o=t.getInputs()[0]}var r=this,i=["change","keyup","blur"];r.weight=3;var o,s="date";r.getClassName=function(){return s},r.setEvents=function(e){i=e},r.getEvents=function(){return i},r.isValid=function(t){if(e.utils.isEmpty(t))return!0;var n=o.inputmask("option","mask");return Inputmask.isValid(o.val(),{alias:n})},a()},e}(hex),hex=function(e){"use strict";return e.validators.fileupload=function(e,t){function n(){void 0!==t.events&&a.setEvents(t.events)}var a=this,r="fileupload";a.getClassName=function(){return r};var i=[];a.setEvents=function(e){i=e},a.getEvents=function(){return i},a.isValid=function(){var t=e.getWidgets().fileupload;return void 0===t?!0:t.loading===!0?!1:!0},n()},e}(hex);